{% extends "base_dashboard.html" %}
{% load static %}
{% block dashboard_body %}
<style>
   @media screen and (max-width: 1200px) {

.main_ban {
  flex-wrap: wrap !important;
}
}

@media (max-width: 1034px) { /* Adjust the max-width as needed */
.security_main {
    position: static;
    left: auto;
    transform: none;
    z-index: auto;
}
}

  .dataTables_length select{
    border: 1px solid #aaa;
      
      background-color: transparent;

      margin: 0 5px !important;
      font-weight: 500 !important;
  }
  
  .bottom{
    margin-top: 20px;
  }
  .traded_icons {
    display: flex;
    align-items: center;
    gap: 0.5rem;
  }

  .middle_nifty {
    display: flex;
    align-items: center;
    justify-content: space-between;
  }

  .high_low_nifty {
    display: flex;
    gap: 2rem;
    align-items: center;

  }

  #market_top {
    text-decoration: none;
    font-size: 11px;
    padding: 4px;
    transition: 0.3s;
    position: relative;
  }

  #market_top:hover {
    background-color: dodgerblue;
    color: white;
    border-radius: 10px;

  }

  #market_top::after {
    content: " ";
    position: absolute;
    border-left: 1px #6c757d solid;
    top: 35%;
    right: 0;
    height: 30%;
    margin-top: auto;
    margin-bottom: auto;
  }

  .nifty_main {
    width: 23rem;
    height: 10rem;
    outline-color: gray;
    border-radius: 10px;
    padding: 11px;

  }

  .nitfy_fin_bank_main {
    gap: 2rem;
    display: flex;
    flex-wrap: wrap;
    justify-content: center;bi.bi-arrow-clockwise


  }

  .text-danger{
    color: rgb(196 0 0) !important;
  }
  .border-success {
    color: rgb(6, 197, 98) !important;
  }

  child_global {
    row-gap: 1rem;
    display: flex;
    flex-direction: column;
  }

  i.bi.bi-arrow-clockwise {
    all: unset;
    font-size: 13px;
    margin-top: 5px;
    transition: 0.3s;
  }

  i.bi.bi-arrow-clockwise:hover {
    all: unset
  }
  .refresh_global{
    all: unset;
    background: white !important ;
    color:  #4399eb;
    border-radius: 7px;
    border: 1px solid #4399eb;
  
    display: flex;
    gap: 0.2rem;
    padding: 7px 0;
    margin: 0;
    width: 42px;
    margin-top: 0px;
    margin-bottom: 4px;
    justify-content: center;
    align-items: center;
    /* padding-top: 2px; */
    cursor: pointer;
    transition: 0.3s;
  }

  .refresh_global:hover {
 
    background: #4399eb !important;
    color: white !important;
  }
  .country_indices_refresh{
    align-items: center !important;
  }
  .country_indices_refresh h5{
   margin-bottom: 0 !important;
  }

  .hello{
    all:unset !important;
  }
  .hello:hover{
        background: transparent;
    color: #4399eb !important;
  }

  .desc_usage_active {
    color: #4399eb;
    text-align: center;
    border-bottom: 2px solid #4399eb;
    font-size: 21px;
    font-weight: 600;
  }

  .chart-header:hover {
    cursor: pointer;
  }

  .bi-graph-up {
    border: 1px solid #4399eb;
    padding: 6px;
    height: 34px;
    width: 34px;
    border-radius: 7px;
    transition: 0.3s;
    color: #4399eb !important;
  }

  .bi-graph-up:hover {
    background-color: dodgerblue;
    color: white !important;
    border: none;
  }

  @media screen and (max-width: 760px) {

    .main_ban {
      flex-wrap: wrap;
    }
  }

  .ban_security,
  .ban_entry,
  .ban_exits {
    width: 100%;
  }
</style>
<style>
  #OI_gainer,
  #OI_loser,
  #OI_volume_buzzers,
  #OI_volume_1,
  #OI_volume_2 {
    cursor: pointer;
    text-align: center;
    transition: 0.3s;
    font-size: 21px;

  }

  .future_active {
    color: #4399eb;
    text-align: center;
    border-bottom: 2px solid #4399eb;
    font-size: 21px;
    font-weight: 600;
  }
</style>
<style>
  .dropstart .dropdown-toggle::before {
    display: none !important;
    margin-right: 0.255em;
    vertical-align: 0.255em;
    content: "";
    border-top: 0.3em solid transparent;
    border-right: 0.3em solid;
    border-bottom: 0.3em solid transparent;
  }

  .market_action:hover #maket_action_dropdown {
    display: block;
    right: 6px !important;
    top: 15px;

  }

  #market_fav_bell:hover {
    color: #2196f3 !important;
    cursor: pointer;
}

  .filter_ipo_active {
    color: #4399eb;
    text-align: center;
    border-bottom: 2px solid #4399eb;
    font-size: 21px;
    font-weight: 600;
  }

  .col-4 {
    text-align: center;
    transition: 0.3s;
    cursor: pointer;
  }

  @media (max-width: 768px) {
    .head_image {
      width: fit-content !important;
    }

    /* .inner_future_open{
      translate: 126px 0;
    } */

  }

  .equity_sme {
    cursor: pointer;
  }

  .filter_child_active {
    color: #4399eb;
    text-align: center;
    border-bottom: 2px solid #4399eb;
    font-size: 21px;
    font-weight: 600;
  }

  .dataTables_length,
  .dataTables_filter {
    margin: 9px 0 9px 0;

  }

  /* .sorting{
    display: none !important;
  } */
  thead {
    border-color: #8080803b !important;
    border-style: solid;
    border-width: 0;
  }

  table.dataTable.no-footer {
    border-bottom: 1px solid #11111112 !important;
  }

  .sorting::after,
  .sorting::before {
    display: none !important;
  }

  .dataTables_wrapper .dataTables_length, .dataTables_wrapper .dataTables_filter, .dataTables_wrapper .dataTables_info, .dataTables_wrapper .dataTables_processing, .dataTables_wrapper .dataTables_paginate {
    color: black !important;
    padding: 10px;
}

  .dataTables_wrapper .dataTables_paginate .paginate_button.current, .dataTables_wrapper .dataTables_paginate .paginate_button.current:hover {
    color: whitesmoke !important;
    border: 1px solid #59aaf9 !important;
    background-color: rgba(230, 230, 230, 0.1);
    background: -webkit-gradient(linear, left top, left bottom, color-stop(0%, rgba(230, 230, 230, 0.1)), color-stop(100%, rgba(0, 0, 0, 0.1)));
    background: -webkit-linear-gradient(top, rgba(230, 230, 230, 0.1) 0%, rgba(0, 0, 0, 0.1) 100%);
    background: -moz-linear-gradient(top, rgba(230, 230, 230, 0.1) 0%, rgba(0, 0, 0, 0.1) 100%);
    background: -ms-linear-gradient(top, rgba(230, 230, 230, 0.1) 0%, rgba(0, 0, 0, 0.1) 100%);
    background: -o-linear-gradient(top, rgba(230, 230, 230, 0.1) 0%, rgba(0, 0, 0, 0.1) 100%);
    /* background: linear-gradient(to bottom, rgba(230, 230, 230, 0.1) 0%, rgba(0, 0, 0, 0.1) 100%); */
    background: #59aaf9 !important;
}

body .dataTables_wrapper .dataTables_paginate .paginate_button.current,
body .dataTables_wrapper .dataTables_paginate .paginate_button.current:hover {
    color: white !important;
}
.dataTables_wrapper .dataTables_paginate .paginate_button {
    box-sizing: border-box;
    display: inline-block;
    min-width: 1.5em;
    padding: 0.5em 1em ;
    margin-left: 7px !important;
    text-align: center;
    text-decoration: none !important;
    cursor: pointer;
    color: inherit !important;
    border: 1px solid transparent;
    border-radius: 7px !important;
    background: transparent;
}

.dataTables_wrapper .dataTables_paginate .paginate_button:active {
    outline: none;
    background-color: #2b2b2b;
    background: -webkit-gradient(linear, left top, left bottom, color-stop(0%, #2b2b2b), color-stop(100%, #0c0c0c));
    background: -webkit-linear-gradient(top, #2b2b2b 0%, #0c0c0c 100%);
    background: -moz-linear-gradient(top, #2b2b2b 0%, #0c0c0c 100%);
    background: -ms-linear-gradient(top, #2b2b2b 0%, #0c0c0c 100%);
    background: -o-linear-gradient(top, #2b2b2b 0%, #0c0c0c 100%);
    background: #59aaf9 !important;
    box-shadow: inset 0 0 3px #111;
    color: white !important;
}

.dataTables_wrapper .dataTables_paginate .paginate_button:hover {
    color: white !important;
    border: 1px solid #59aaf9 !important;
    background-color: #585858;
    background: -webkit-gradient(linear, left top, left bottom, color-stop(0%, #585858), color-stop(100%, #111));
    background: -webkit-linear-gradient(top, #585858 0%, #111 100%);
    background: -moz-linear-gradient(top, #585858 0%, #111 100%);
    background: -ms-linear-gradient(top, #585858 0%, #111 100%);
    background: -o-linear-gradient(top, #585858 0%, #111 100%);
    background: linear-gradient(to bottom, #585858 0%, #111 100%);
    background: #59aaf9 !important;
}



.paginate_button.previous::before {
  content: "<"; /* Unicode left arrow character */
  font-size: 16px !important;
}
.paginate_button.previous:hover::before{
  color: white !important;
}

/* Next page button icon */
.paginate_button.next::before {
  content: ">"; /* Unicode right arrow character */
  font-size: 16px !important;
}

.paginate_button.next:hover::before {
  color: white !important;
}
.paginate_button.previous {
    font-size: 0 !important;
     padding: 4px 14px !important;
}

.paginate_button.next{
  font-size: 0 !important;
  padding: 4px 14px !important;
}

/* Hide text for Previous and Next buttons */
#Oi_gainer_data_previous,#stock_table_52_high_previous,#Oi_loser_data_table_data_table_previous {
  font-size: 0 !important;
  background-color: white; 
  color: black;
  padding: 7px 18px; 
  border-radius: 4px; 
  cursor: pointer; 
  transition: background-color 0.3s ease; 
  box-shadow: 0 3px 16px 0 rgba(35,47,62,.15)!important;
}
#stock_table_52_high_previous:hover {
  color: white !important;
  
}
#Oi_gainer_data_next,#stock_table_52_high_next {
  font-size: 0 !important;
  background-color: white; /* Button background color */
  color: black; /* Button text color */
   /* Button border */
  padding: 7px 18px; /* Button padding */
  border-radius: 4px; /* Button border-radius */
  cursor: pointer; /* Add pointer cursor on hover */
  transition: background-color 0.3s ease; 
  box-shadow: 0 3px 16px 0 rgba(35,47,62,.15)!important;
}

#stock_table_52_high_next:hover{
  color: white !important;
}

.paginate_button {
  box-shadow: 0 3px 16px 0 rgba(35,47,62,.15)!important; /* Adjust the values as needed */
  padding: 0.3em 0.9em !important;
}

.dataTables_length{
  margin-top: 17px !important;
}

.dataTables_length label{
  text-transform: capitalize !important;
}

.bearish {
  /* Set the background gradient */
  background: linear-gradient(to right, yellow, red);
  /* Apply a color filter to the image */
  filter: hue-rotate(180deg); /* Rotate the hue by 180 degrees (red to yellow) */
}

/* Apply the class to your image */
img.bearish {
  /* Ensure the image inherits the gradient color */
  background-clip: text;
  -webkit-background-clip: text; /* For Safari and older versions of Chrome */
  color: transparent;
}

.market-icon {
  /* Define styles for bearish images */
  /* For example, change the border color to red */
  border-color: red;
}
</style>

<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script>
  $(document).ready(function () {
    $(document)
      .ajaxStart(function () {
        $("#spinner").show();
      })
      .ajaxStop(function () {
        $("#spinner").hide();
      });
    function updateData() {
      $.ajax({
        url: '/base_dashboard1',
        type: 'GET',
        success: function (data) {
          console.log("HII");

          $('#nifty_50_symbol').text(data.nifty50_data.symbol_name);
          $('#nifty_50_high').text(data.nifty50_data.high);
          $('#nifty_50_low').text(data.nifty50_data.low);
          $('#nifty_50_trade_value').text(data.nifty50_data.last_trade_price);

          if (data.nifty50_value > 0) {
            $('#nifty_50_value').addClass("text-success");
            $('#nifty_icons').html('<i class="bi bi-arrow-up text-success" style="font-size: 22px;"></i>');
          } else {
            $('#nifty_50_value').addClass("text-danger");
            $('#nifty_icons').html('<i class="bi bi-arrow-down text-danger" style="font-size: 22px;"></i>');
          }

          $('#nifty_50_value').text(`${data.nifty50_value.toFixed(2)} (${data.nifty50_percentage.toFixed(2)})%`);

          // banknifty
          $('#niftybank_symbol').text(data.niftybank_data.symbol_name);
          $('#niftybank_high').text(data.niftybank_data.high);
          $('#niftybank_low').text(data.niftybank_data.low);
          $('#niftybank_trade_value').text(data.niftybank_data.last_trade_price);

          if (data.niftybank_value > 0) {
            $('#niftybank_value').addClass("text-success");
            $('#niftybank_icons').html('<i class="bi bi-arrow-up text-success" style="font-size: 22px;"></i>');
          } else {
            $('#niftybank_value').addClass("text-danger");
            $('#niftybank_icons').html('<i class="bi bi-arrow-down text-danger" style="font-size: 22px;"></i>');
          }

          $('#niftybank_value').text(`${data.niftybank_value.toFixed(2)} (${data.niftybank_percentage.toFixed(2)})%`);

          // finnity
          $('#finnity_symbol').text(data.finnity_data.symbol_name);
          $('#finnity_high').text(data.finnity_data.high);
          $('#finnity_low').text(data.finnity_data.low);
          $('#finnity_trade_value').text(data.finnity_data.last_trade_price);

          if (data.finnity_value > 0) {
            $('#finnity_value').addClass("text-success");
            $('#finnity_icons').html('<i class="bi bi-arrow-up text-success" style="font-size: 22px;"></i>');
          } else {
            $('#finnity_value').addClass("text-danger");
            $('#finnity_icons').html('<i class="bi bi-arrow-down text-danger" style="font-size: 22px;"></i>');
          }

          $('#finnity_value').text(`${data.finnity_value.toFixed(2)} (${data.finnity_percentage.toFixed(2)})%`);
        },
        complete: function () {
          // Schedule the next update after 5 seconds

          setTimeout(updateData, 5000);
        }
      });
    }

    // Initial call to start the update loop
    updateData();
  });
</script>
<script>
  $(document).ready(function () {
    function update_global_indicies() {

$("#spinner").show()
      $.ajax({
        url: "/global_market",
        dataType: "json",
        success: function (data) {
            $("#tables-container").empty(countryTable);
          for (var i = 0; i < data.tables.length; i++) {
            console.log(data.tables[i].country)
            var countryTable = "";
            countryTable += "<child_global>";
            countryTable += `<div class="country_indices_refresh d-flex  justify-content-between" style="">
                        <h5>${data.tables[i].country}</h5>
                        <div class="d-flex fs-5 refresh_global" style="font-size: 16px !important;">
                          <i class='bx bx-revision'></i>
                          
                            
                            </div>
                        </div>`;

      
                        for (var j = 0; j < data.tables[i].items.length; j++) {
                          var item = data.tables[i].items[j];
                          var priceClass = item.change_value > 0 ? "text-success" : "text-danger";
                          var borderClass = item.change_value > 0 ? "border-start  border-4 border-success" : " border-start  border-4 border-danger";
                          var progress_caret = item.change_value > 0 ? "up" : "down"; 
                          var background_color_global_indicator = item.change_value > 0 ? "#32cd4c2e" : "#cd32322e"; 
                          var background_color_global_indicator_minus_plus = item.change_value > 0 ? "+" : ""; 
                    
                          countryTable += `
                                    <div class="child_table">
                         
          
          
                                    <div class="main_global_card" style="
                                    width: 21rem;
                                    display: flex;
                                    align-items: flex-end;
                                    column-gap: 1rem;
                                    margin-bottom: 1rem;
                                    border-radius: 10px;
                                    padding: 7px 11px;
                                    box-shadow: rgba(60, 64, 67, 0.3) 0px 1px 2px 0px, rgba(60, 64, 67, 0.15) 0px 1px 3px 1px;
                                    justify-content: space-between;
          ">

          <div class="left_global_content" style="    display: flex;
          align-items: flex-end;
          gap: 1rem;
      ">
              <div class="gain_loss_icon">
                  <i class="bx bx-${progress_caret}-arrow-alt ${priceClass}" style="
                  font-size: 16px;
              font-size: 34px;
              padding: 13px;
              font-weight: 300 !important;
              ;
          
              border-radius: 20px;
          "></i>
              </div>
              <div class="stock_name_price">
          <h5 style="    font-size: 16px;">${item.symbol}</h5>
          <h5 style="
          font-weight: 600 !important;
              font-size: 14px;
              color: darkslategray;
          ">${item.current_price}</h5>
              </div>
            </div>

          <div class="left_global_content">
              <div class="gain_loss_price">
                  <h5 class="${priceClass} percent_gain_loss_global" style="    font-size: 16px;">${background_color_global_indicator_minus_plus}${item.change_per}%</h5>
                  <h5 class="${priceClass} percent_gain_loss_globla"  style="
          font-weight: 600 !important;
              font-size: 14px;
              color: darkslategray;
          ">${background_color_global_indicator_minus_plus}${item.change_value}</h5>
              </div>
            </div>
          </div>
          
          
          
          `;
          
          
          
          
          
          
          
          
          
            
            
                                    
                        }

            countryTable += "</child_global>";
            $("#tables-container").append(countryTable);
          }
          $(".refresh_global").click(function () {
    
    update_global_indicies()
  })
          $("#spinner").hide()
        },
        complete: function () {
          // Schedule the next update after 5 seconds

          setTimeout(updateData, 5000);
        }
      });

    }
    update_global_indicies()

   
  });
</script>
<script>
  // AJAX call to fetch data for the category and populate the table
  function market_data() {


    $.ajax({
      url: "/market_actions",
      method: "GET",
      success: function (response) {
        console.log(response.tables);

        // top_start
        topgainers = response.tables.filter((x) => {
          return x.category == "topGainers";
        });
        console.log(topgainers);
        var top_gainers = "";
        final_top = topgainers.map((y) => {
          y.data.forEach((z) => {
            var progress_market_color = z.change_value > 0 ? "text-success" : "text-danger";
            var progress_market = z.change_value > 0 ? '<svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" color="successText" class="SVGLoader__StyledComp-sc-1b6xkon-1 dfxNuI"><path d="M12 19V5M12 5L5 12M12 5L19 12" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></svg>':'<svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" color="errorText" rotate="down" class="SVGLoader__StyledComp-sc-1b6xkon-1 kskMxG"><path d="M12 19V5M12 5L5 12M12 5L19 12" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></svg>';  
            var progress_market_icon = z.change_value > 0 ? "{% static 'img/bullish.png' %}" : "{% static 'img/bearish.png' %}";
            console.log(z.symbol_name);
            $("#top_gainers_table").append(
              `<tr>
                     <td><i class="bi bi-graph-up"></i></td>
                      <td>${z.symbol_name}</td>
                      <td>${z.prev_high}</td>
                      <td class="text-danger">${z.today_low}</td>
                      <td class="text-success">${z.today_high}</td>
                      <td id="top_down_icon_market">${progress_market}${z.change_value}(${z.change_percent}%)</td>
                      <td>${z.prev_close}</td>
                      <td>

                        ${z.today_volume}
                       
                       </td>
                       <td>
                        <div class="market_action dropstart">
                          <div  class=" dropdown-toggle" data-bs-toggle="dropdown" aria-expanded="false">
                            <i class="bi bi-three-dots-vertical"></i>
                          </div>
                          <ul class="dropdown-menu" id="maket_action_dropdown">
                            <li id="market_fav_bell" class="d-flex add-to-watchlist" style="font-size: 12px;gap: 0.2rem;font-weight: 600;align-items: baseline;justify-content: center;">
                                <i class="bi bi-star fw-3"></i>
                                <div> Add To Watchlist</div>
                                </li>
                                <hr style="margin: 0.5rem 0;">
                            <li id="market_fav_bell" class="d-flex add-to-watchlist" style="font-size: 12px;gap: 0.2rem;font-weight: 600;align-items: baseline;justify-content: center;">
                              <i class="bi bi-bell"></i>
                                <div>Create Alert</div>
                                </li>
                          </ul>
                        </div>
                   
                       </td>
                  </tr>`
            );
          });
        });
        //end_top_start

        // top_loser_start
        topLosers = response.tables.filter((loser_1) => {
          return loser_1.category == "topLosers";
        });
        console.log(topLosers);
        var top_gainers = "";
        final_top = topLosers.map((loser_2) => {
          loser_2.data.forEach((loser_3) => {
            var progress_market_color = loser_3.change_value > 0 ? "text-success" : "text-danger";
            var progress_market = loser_3.change_value > 0 ? '<svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" color="successText" class="SVGLoader__StyledComp-sc-1b6xkon-1 dfxNuI"><path d="M12 19V5M12 5L5 12M12 5L19 12" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></svg>':'<svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" color="errorText" rotate="down" class="SVGLoader__StyledComp-sc-1b6xkon-1 kskMxG"><path d="M12 19V5M12 5L5 12M12 5L19 12" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></svg>'
            var progress_market_icon = loser_3.change_value > 0 ? "{% static 'img/bullish.png' %}" : "{% static 'img/bearish.png' %}";
            console.log(loser_3.symbol_name);
            $("#top_losers_table").append(
              `<tr>
                <td><i class="bi bi-graph-up"></i></td>
                      <td>${loser_3.symbol_name}</td>
                      <td>${loser_3.prev_high}</td>
                      <td class="text-danger">${loser_3.today_low}</td>
                      <td class="text-success">${loser_3.today_high}</td>
                      <td>
                        ${progress_market}
                        ${loser_3.change_value}(${loser_3.change_percent}%)
                      </td>
                      <td>${loser_3.prev_close}</td>
                      <td>${loser_3.today_volume}</td>
                      <td>
                        <div class="market_action dropstart">
                          <div  class=" dropdown-toggle" data-bs-toggle="dropdown" aria-expanded="false">
                            <i class="bi bi-three-dots-vertical"></i>
                          </div>
                          <ul class="dropdown-menu" id="maket_action_dropdown">
                            <li id="market_fav_bell" class="d-flex add-to-watchlist" style="font-size: 12px;gap: 0.2rem;font-weight: 600;align-items: baseline;justify-content: center;">
                                <i class="bi bi-star fw-3"></i>
                                <div> Add To Watchlist</div>
                                </li>
                                <hr style="margin: 0.5rem 0;">
                            <li id="market_fav_bell" class="d-flex add-to-watchlist" style="font-size: 12px;gap: 0.2rem;font-weight: 600;align-items: baseline;justify-content: center;">
                              <i class="bi bi-bell"></i>
                                <div>Create Alert</div>
                                </li>
                          </ul>
                        </div>
                   
                       </td>
                  </tr>`
            );
          });
        });
        //end_top_loser_start
        // top_sameopenandlow_start
        sameOpenAndLow = response.tables.filter((sameOpenAndLow_1) => {
          return sameOpenAndLow_1.category == "sameOpenAndLow";
        });
        console.log(sameOpenAndLow);
        var top_gainers = "";
        final_top = sameOpenAndLow.map((sameOpenAndLow_2) => {
          sameOpenAndLow_2.data.forEach((sameOpenAndLow_3) => {
            var progress_market_color = sameOpenAndLow_3.change_value > 0 ? "text-success" : "text-danger";
            var progress_market = sameOpenAndLow_3.change_value > 0 ? '<svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" color="successText" class="SVGLoader__StyledComp-sc-1b6xkon-1 dfxNuI"><path d="M12 19V5M12 5L5 12M12 5L19 12" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></svg>':'<svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" color="errorText" rotate="down" class="SVGLoader__StyledComp-sc-1b6xkon-1 kskMxG"><path d="M12 19V5M12 5L5 12M12 5L19 12" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></svg>';
            var progress_market_icon = sameOpenAndLow_3.change_value > 0 ? "{% static 'img/bullish.png' %}" : "{% static 'img/bearish.png' %}";
            console.log(sameOpenAndLow_3.symbol_name);
            $("#same_open_and_low").append(
              `<tr>
                <td><i class="bi bi-graph-up"></i></td>
                      <td>${sameOpenAndLow_3.symbol_name}</td>
                      <td>${sameOpenAndLow_3.prev_high}</td>
                      <td class="text-danger">${sameOpenAndLow_3.today_low}</td>
                      <td class="text-success">${sameOpenAndLow_3.today_high}</td>
                      <td>${progress_market}${sameOpenAndLow_3.change_value}(${sameOpenAndLow_3.change_percent}%)</td>
                      <td>${sameOpenAndLow_3.prev_close}</td>
                      <td>${sameOpenAndLow_3.today_volume}</td>
                      <td>
                        <div class="market_action dropstart">
                          <div  class=" dropdown-toggle" data-bs-toggle="dropdown" aria-expanded="false">
                            <i class="bi bi-three-dots-vertical"></i>
                          </div>
                          <ul class="dropdown-menu" id="maket_action_dropdown">
                            <li id="market_fav_bell" class="d-flex add-to-watchlist" style="font-size: 12px;gap: 0.2rem;font-weight: 600;align-items: baseline;justify-content: center;">
                                <i class="bi bi-star fw-3"></i>
                                <div> Add To Watchlist</div>
                                </li>
                                <hr style="margin: 0.5rem 0;">
                            <li id="market_fav_bell" class="d-flex add-to-watchlist" style="font-size: 12px;gap: 0.2rem;font-weight: 600;align-items: baseline;justify-content: center;">
                              <i class="bi bi-bell"></i>
                                <div>Create Alert</div>
                                </li>
                          </ul>
                        </div>
                   
                       </td>
                  </tr>`
            );
          });
        });
        //end_sameopenandlow_start
        // top_sameOpenAndHigh_start
        sameOpenAndHigh = response.tables.filter((sameOpenAndHigh_1) => {
          return sameOpenAndHigh_1.category == "sameOpenAndHigh";
        });
        console.log(sameOpenAndHigh);
        var top_gainers = "";
        final_top = sameOpenAndHigh.map((sameOpenAndHigh_2) => {
          sameOpenAndHigh_2.data.forEach((sameOpenAndHigh_3) => {
            var progress_market_color = sameOpenAndHigh_3.change_value > 0 ? "text-success" : "text-danger";
            var progress_market = sameOpenAndHigh_3.change_value > 0 ? '<svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" color="successText" class="SVGLoader__StyledComp-sc-1b6xkon-1 dfxNuI"><path d="M12 19V5M12 5L5 12M12 5L19 12" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></svg>':'<svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" color="errorText" rotate="down" class="SVGLoader__StyledComp-sc-1b6xkon-1 kskMxG"><path d="M12 19V5M12 5L5 12M12 5L19 12" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></svg>';
            var progress_market_icon = sameOpenAndHigh_3.change_value > 0 ? "{% static 'img/bullish.png' %}" : "{% static 'img/bearish.png' %}";
            console.log(sameOpenAndHigh_3.symbol_name);
            $("#same_Open_And_High").append(
              `<tr>
                <td><i class="bi bi-graph-up"></i></td>
                      <td>${sameOpenAndHigh_3.symbol_name}</td>
                      <td>${sameOpenAndHigh_3.prev_high}</td>
                      <td class="text-danger">${sameOpenAndHigh_3.today_low}</td>
                      <td class="text-success">${sameOpenAndHigh_3.today_high}</td>
                      <td>${progress_market} ${sameOpenAndHigh_3.change_value}(${sameOpenAndHigh_3.change_percent}%)</td>
                      <td>${sameOpenAndHigh_3.prev_close}</td>
                      <td>${sameOpenAndHigh_3.today_volume}</td>
                      <td>
                        <div class="market_action dropstart">
                          <div  class=" dropdown-toggle" data-bs-toggle="dropdown" aria-expanded="false">
                            <i class="bi bi-three-dots-vertical"></i>
                          </div>
                          <ul class="dropdown-menu" id="maket_action_dropdown">
                            <li id="market_fav_bell" class="d-flex add-to-watchlist" style="font-size: 12px;gap: 0.2rem;font-weight: 600;align-items: baseline;justify-content: center;">
                                <i class="bi bi-star fw-3"></i>
                                <div> Add To Watchlist</div>
                                </li>
                                <hr style="margin: 0.5rem 0;">
                            <li id="market_fav_bell" class="d-flex add-to-watchlist" style="font-size: 12px;gap: 0.2rem;font-weight: 600;align-items: baseline;justify-content: center;">
                              <i class="bi bi-bell"></i>
                                <div>Create Alert</div>
                                </li>
                          </ul>
                        </div>
                   
                       </td>
                  </tr>`
            );
          });
        });
        //end_same_Open_And_High_start
        // top_gapUp_start
        gapUp = response.tables.filter((gapUp_1) => {
          return gapUp_1.category == "gapUp";
        });
        console.log(gapUp);
        var top_gainers = "";
        final_top = gapUp.map((gapUp_2) => {
          gapUp_2.data.forEach((gapUp_3) => {
            var progress_market_color = gapUp_3.change_value > 0 ? "text-success" : "text-danger";
            var progress_market = gapUp_3.change_value > 0 ? '<svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" color="successText" class="SVGLoader__StyledComp-sc-1b6xkon-1 dfxNuI"><path d="M12 19V5M12 5L5 12M12 5L19 12" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></svg>':'<svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" color="errorText" rotate="down" class="SVGLoader__StyledComp-sc-1b6xkon-1 kskMxG"><path d="M12 19V5M12 5L5 12M12 5L19 12" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></svg>';
            var progress_market_icon = gapUp_3.change_value > 0 ? "{% static 'img/bullish.png' %}" : "{% static 'img/bearish.png' %}";
            console.log(gapUp_3.symbol_name);
            $("#gap_Up").append(
              `<tr>
                <td><i class="bi bi-graph-up"></i></td>
                      <td>${gapUp_3.symbol_name}</td>
                      <td>${gapUp_3.prev_high}</td>
                      <td class="text-danger">${gapUp_3.today_low}</td>
                      <td class="text-success">${gapUp_3.today_high}</td>
                      <td>${progress_market}${gapUp_3.change_value}(${gapUp_3.change_percent}%)</td>
                      <td>${gapUp_3.prev_close}</td>
                      <td>${gapUp_3.today_volume}</td>
                      <td>
                        <div class="market_action dropstart">
                          <div  class=" dropdown-toggle" data-bs-toggle="dropdown" aria-expanded="false">
                            <i class="bi bi-three-dots-vertical"></i>
                          </div>
                          <ul class="dropdown-menu" id="maket_action_dropdown">
                            <li id="market_fav_bell" class="d-flex add-to-watchlist" style="font-size: 12px;gap: 0.2rem;font-weight: 600;align-items: baseline;justify-content: center;">
                                <i class="bi bi-star fw-3"></i>
                                <div> Add To Watchlist</div>
                                </li>
                                <hr style="margin: 0.5rem 0;">
                            <li id="market_fav_bell" class="d-flex add-to-watchlist" style="font-size: 12px;gap: 0.2rem;font-weight: 600;align-items: baseline;justify-content: center;">
                              <i class="bi bi-bell"></i>
                                <div>Create Alert</div>
                                </li>
                          </ul>
                        </div>
                   
                       </td>
                  </tr>`
            );
          });
        });
        //end_gapUp_start
        // top_gapDown_start
        gapDown = response.tables.filter((gapDown_1) => {
          return gapDown_1.category == "gapDown";
        });
        console.log(gapDown);
        var top_gainers = "";
        final_top = gapDown.map((gapDown_2) => {
          gapDown_2.data.forEach((gapDown_3) => {
            var progress_market_color = gapDown_3.change_value > 0 ? "text-success" : "text-danger";
            var progress_market = gapDown_3.change_value > 0 ? '<svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" color="successText" class="SVGLoader__StyledComp-sc-1b6xkon-1 dfxNuI"><path d="M12 19V5M12 5L5 12M12 5L19 12" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></svg>':'<svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" color="errorText" rotate="down" class="SVGLoader__StyledComp-sc-1b6xkon-1 kskMxG"><path d="M12 19V5M12 5L5 12M12 5L19 12" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></svg>';
            var progress_market_icon = gapDown_3.change_value > 0 ? "{% static 'img/bullish.png' %}" : "{% static 'img/bearish.png' %}";
            var progress_market_class = gapDown_3.change_value > 0 ? "bullish" : "bearish" ;
            console.log(gapDown_3.symbol_name);
            $("#gap_Down").append(
              `<tr>
                <td><i class="bi bi-graph-up"></i></td>
                      <td>${gapDown_3.symbol_name}</td>
                      <td>${gapDown_3.prev_high}</td>
                      <td class="text-danger">${gapDown_3.today_low}</td>
                      <td class="text-success">${gapDown_3.today_high}</td>
                      <td>${progress_market} ${gapDown_3.change_value}(${gapDown_3.change_percent}%)</td>
                      <td>${gapDown_3.prev_close}</td>
                      <td>${gapDown_3.today_volume}</td>
                      <td>
                        <div class="market_action dropstart">
                          <div  class=" dropdown-toggle" data-bs-toggle="dropdown" aria-expanded="false">
                            <i class="bi bi-three-dots-vertical"></i>
                          </div>
                          <ul class="dropdown-menu" id="maket_action_dropdown">
                            <li id="market_fav_bell" class="d-flex add-to-watchlist" style="font-size: 12px;gap: 0.2rem;font-weight: 600;align-items: baseline;justify-content: center;">
                                <i class="bi bi-star fw-3"></i>
                                <div> Add To Watchlist</div>
                                </li>
                                <hr style="margin: 0.5rem 0;">
                            <li id="market_fav_bell" class="d-flex add-to-watchlist" style="font-size: 12px;gap: 0.2rem;font-weight: 600;align-items: baseline;justify-content: center;">
                              <i class="bi bi-bell"></i>
                                <div>Create Alert</div>
                                </li>
                          </ul>
                        </div>
                   
                       </td>
                  </tr>`
            );
          });
        });
        //end_gapDown_start

      },
      error: function () {
        console.log("Error occurred while fetching data for category: " + category.name);
      },
      complete: function () {
        // Schedule the next update after 5 seconds

        setTimeout(updateData, 5000);
      }
    });
  }
  // Process the categories and create tables
  market_data()
  $(document).ready(function () {
    var categories = JSON.parse(your_json_data).categories;
    $.each(categories, function (index, category) {
      createCategoryTable(category);
    });
  });
</script>

<script>
  $(document).ready(function () {
    $.ajax({
      url: "{% url 'ban_list_dashboard' %}",
      method: "GET",
      success: function (response) {
        console.log(response)
        populateTable(response.securities_ban_result, "#securities_ban_table");
        populateTable(response.possible_entrants_result, "#possible_entrants_table");
        populateTable(response.possible_exits_result, "#possible_exits_table");
      },
      error: function () {
        console.log("Error occurred while fetching data.");
      }
    });

    function populateTable(data, tableId) {
    var tableBody = $(tableId + " tbody");
    tableBody.empty();

    if (data.length === 0) {
        // If no data is available, display a message in the table
        var messageRow = $("<tr></tr>").append($("<td colspan='3'>No record found</td>"));
        tableBody.append(messageRow);
    } else {
        // If data is available, populate the table with the data
        data.forEach(function (item) {
            var row = $("<tr></tr>");
            row.append($("<td></td>").text(item.symbol_name));
            row.append($("<td></td>").text(item.previous_percent));
            row.append($("<td></td>").text(item.current_percent));
            // Add more columns as needed

            tableBody.append(row);
        });
    }
}
  });
</script>
<!-- <script>
          $(document).ready(function() {
              $.ajax({
                  url: '/stock-listing/',
                  type: 'GET',
                  dataType: 'json',
                  success: function(response) {
                      populateTable(response.sme_records, '#sme-table');
                      populateTable(response.equity_records, '#equity-table');
                  }
              });
          });
  
          function populateTable(records, tableId) {
              var tableBody = $(tableId + ' tbody');
              $.each(records, function(index, record) {
                  var row = $('<tr></tr>');
                  row.append('<td>' + record.symbol + '</td>');
                  row.append('<td>' + record.name + '</td>');
                  row.append('<td>' + record.instrument + '</td>');
                  tableBody.append(row);
              });
          }
      </script> -->


<!-- Include your other meta tags, stylesheets, etc. here -->

    <!-- Include jQuery library -->


    <script>
        $(document).ready(function () {
            $(document).on("click", ".add-to-watchlist", function () {
                // Check if the user is authenticated
                if ({{ request.user.is_authenticated|lower }}) {
                    // User is authenticated, proceed with watchlist addition
                    var rowData = {
                        symbol_name: $(this).closest("tr").find("td:eq(1)").text(),
                        prev_high: $(this).closest("tr").find("td:eq(2)").text(),
                        today_low: $(this).closest("tr").find("td:eq(3)").text(),
                        today_high: $(this).closest("tr").find("td:eq(4)").text(),
                        change_value: parseFloat($(this).closest("tr").find("td:eq(5)").text().split("(")[0]),
                        change_percent: parseFloat($(this).closest("tr").find("td:eq(5)").text().split("(")[1].split("%")[0]),
                        prev_close: $(this).closest("tr").find("td:eq(6)").text(),
                        today_volume: parseInt($(this).closest("tr").find("td:eq(7)").text()),
                    };

                    // Rest of your existing AJAX code for adding to watchlist
                    $.ajax({
                        url: "/save_to_watchlist", // Replace with your Django endpoint to handle the watchlist data
                        method: "POST",
                        data: rowData,
                        dataType: "json",
                        success: function (response) {
                            console.log(response);
                            if (response.message1) {
                                $("#alert-watchlist").text(response.message1).addClass('alert alert-danger show').removeClass('alert-success').fadeIn();
                            } else if (response.message2) {
                                $("#alert-watchlist").text(response.message2).addClass('alert alert-success show').removeClass('alert-danger').fadeIn();
                            }
                            // Fetch updated watchlist data

                            // Hide the alert after 3 seconds (3000 milliseconds)
                            setTimeout(function () {
                                $("#alert-watchlist").fadeOut();
                            }, 3000);

                        },
                        error: function (xhr, textStatus, errorThrown) {
                            console.log("Error occurred while saving data:", errorThrown);
                            // Handle any error or show error message here
                        },
                    });

                } else {
                    // User is not authenticated, show an error or redirect to login page
                    //alert("You need to be logged in to add to your watchlist.");
                    $("#signinModal").modal("show");
                    // You can also redirect the user to the login page using JavaScript:
               
                }
            });
        });
    </script>


<div class="alert alert-dismissible" role="alert" id="alert-watchlist" style="display: none;
z-index: 100000000009 !important;
position: fixed !important;
right: 0;">


  <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
</div>

      <div class="container mt-5">


  <div class="d-flex gap-4">
    <h4 class="my-3 filterBtn active" data-target="market" style="cursor: pointer; font-size: 1.4rem !important; color: #5a6167;">MARKETS</h4>
    <h4 class="my-3 filterBtn" data-target="globalMarket" style="cursor: pointer; font-size: 1.4rem !important; color: #5a6167;">GLOBAL MARKETS</h4>
  </div>
   <div class="nitfy_fin_bank_main contentDiv" id="marketDiv" style="margin-top: 20px;">
    <div class="nifty_main shadow"
      style="box-shadow: rgba(0, 0, 0, 0.02) 0px 1px 3px 0px, rgba(27, 31, 35, 0.15) 0px 0px 0px 1px;">

      <div class="title_nifty  " style="display: flex;gap: 1rem;">
        <h5 style="font-size: 1rem;" id="nifty_50_symbol"></h5>
        <h5 style="    font-size: 1rem;" class="" id="nifty_50_value"></h5>
      </div>


      <div class="middle_nifty">
        <div class="traded_icons" id="traded_icons">
          <div id="nifty_icons"></div>
          <h4 style="    font-size: 2rem;color: darkslategray;" id="nifty_50_trade_value"></h4>
        </div>
        <div class="high_low_nifty" style="    font-size: 13px;
            font-weight: 700;
            color: darkslategray;">
          <div class="high">
            <p style="margin-bottom: auto;">High</p>
            <p style="margin-bottom: auto;" class="text-success" id="nifty_50_high"></p>
          </div>
          <div class="low">
            <p style="margin-bottom: auto;">Low</p>
            <p style="margin-bottom: auto;" class="text-danger" id="nifty_50_low"></p>
          </div>
        </div>

      </div>
      <hr>

      <div class="bottom_card">
        <a id="market_top"  href="/put_call_ratio/open_interest/" onclick="handleClick('open_interest')" >Analytics</a>
        <a href="/put_call_ratio/change_OI/" onclick="handleClick('change_OI')" id="market_top" class="nifty_oi">Options</a>
        <a href="/put_call_ratio/put_call_ratio_main/" onclick="handleClick('put_call_ratio_main')" id="market_top">PCR</a>
        <a href="stock_option_chain" id="market_top"  class="banknifty_option_chain">Chain</a>
        <a href="/put_call_ratio/live_max_pain/" onclick="handleClick('live_max_pain')" id="market_top">Max pain</a>
        <a href="/main_contributor/nifty/" id="market_top" class="nifty_50_contributor">Contributors</a>
      </div>
    </div>

    <style>
      .active{
        color: #59aaf9 !important;
      }
    </style>

    <script>
$(document).ready(function () {
  $(".nifty_50_contributor").click(function () {
    localStorage.setItem("selectedFilter_contrib", "nifty50");
  });
  $(".nifty_option_chain").click(function () {
    localStorage.setItem("symbol_Option_chain", "NIFTY");
  });
  $(".nifty_oi").click(function () {
  var selectedSymbol = {"nifty":"niftyoilist","spot":"NIFTY+50"};
  localStorage.setItem("selectedSymbol", JSON.stringify(selectedSymbol));
});





$('#marketDiv').show();
    $('#tables-container').hide();

    // Event listener for filter buttons
    $('.filterBtn').click(function() {
      var target = $(this).data('target');
      $('.contentDiv').hide(); // Hide all content divs
      $('#' + target + 'Div').show(); // Show the selected content div

      // Toggle visibility of the globalMarketDiv
      if (target === 'market') {
          $('#tables-container').hide();
      } else if (target === 'globalMarket') {
          $('#tables-container').show();
      }

      // Remove active class from all filter buttons and add it to the clicked button
      $('.filterBtn').removeClass('active');
      $(this).addClass('active');
  });



  $(".niftybank_contributor").click(function () {
    localStorage.setItem("selectedFilter_contrib", "banknifty");
  });
  $(".banknifty_option_chain").click(function () {
    localStorage.setItem("symbol_Option_chain", "BANKNIFTY");
  });
  $(".banknifty_oi").click(function () {
  var selectedSymbol = {"nifty":"bankniftyoi","spot":"NIFTY+BANK"};
  localStorage.setItem("selectedSymbol", JSON.stringify(selectedSymbol));
});









  $(".finnifty_contributor").click(function () {
    localStorage.setItem("selectedFilter_contrib", "finnifty");
  });
  $(".finnifty_option_chain").click(function () {
    localStorage.setItem("symbol_Option_chain", "FINNIFTY");
  });
  $(".finnifty_oi").click(function () {
  var selectedSymbol = {"nifty":"finniftyoilist","spot":"NIFTY+FIN+SERVICE"};
  localStorage.setItem("selectedSymbol", JSON.stringify(selectedSymbol));
});

});

    </script>
    <div class="nifty_main shadow"
      style="box-shadow: rgba(0, 0, 0, 0.02) 0px 1px 3px 0px, rgba(27, 31, 35, 0.15) 0px 0px 0px 1px;">

      <div class="title_nifty  " style="display: flex;gap: 1rem;">
        <h5 style="    font-size: 1rem;" id="niftybank_symbol"></h5>
        <h5 style="    font-size: 1rem;" class="" id="niftybank_value"></h5>
      </div>


      <div class="middle_nifty">
        <div class="traded_icons" id="traded_icons">
          <div id="niftybank_icons"></div>
          <h4 style="    font-size: 2rem;color: darkslategray;" id="niftybank_trade_value"></h4>
        </div>
        <div class="high_low_nifty" style="    font-size: 13px;
            font-weight: 700;
            color: darkslategray;">
          <div class="high">
            <p style="margin-bottom: auto;">High</p>
            <p style="margin-bottom: auto;" class="text-success" id="niftybank_high"></p>
          </div>
          <div class="low">
            <p style="margin-bottom: auto;">Low</p>
            <p style="margin-bottom: auto;" class="text-danger" id="niftybank_low"></p>
          </div>
        </div>

      </div>
      <hr>

      <div class="bottom_card">
        <a id="market_top"  href="/put_call_ratio/open_interest/" onclick="handleClick('open_interest')" >Analytics</a>
        <a href="/put_call_ratio/change_OI/" onclick="handleClick('change_OI')" id="market_top" class="nifty_oi">Options</a>
        <a href="/put_call_ratio/put_call_ratio_main/" onclick="handleClick('put_call_ratio_main')" id="market_top">PCR</a>
        <a href="stock_option_chain" id="market_top"  class="banknifty_option_chain">Chain</a>
        <a href="/put_call_ratio/live_max_pain/" onclick="handleClick('live_max_pain')" id="market_top">Max pain</a>
        <a href="main_contributor/banknifty/" id="market_top" class="nifty_50_contributor">Contributors</a>
      </div>
    </div>
    <div class="nifty_main shadow"
      style="box-shadow: rgba(0, 0, 0, 0.02) 0px 1px 3px 0px, rgba(27, 31, 35, 0.15) 0px 0px 0px 1px;">

      <div class="title_nifty  " style="display: flex;gap: 1rem;">
        <h5 style="    font-size: 1rem;" id="finnity_symbol"></h5>
        <h5 style="    font-size: 1rem;" class="" id="finnity_value"></h5>
      </div>


      <div class="middle_nifty">
        <div class="traded_icons" id="traded_icons">
          <div id="finnity_icons"></div>
          <h4 style="    font-size: 2rem;color: darkslategray;" id="finnity_trade_value"></h4>
        </div>
        <div class="high_low_nifty" style="    font-size: 13px;
            font-weight: 700;
            color: darkslategray;">
          <div class="high">
            <p style="margin-bottom: auto;">High</p>
            <p style="margin-bottom: auto;" class="text-success" id="finnity_high"></p>
          </div>
          <div class="low">
            <p style="margin-bottom: auto;">Low</p>
            <p style="margin-bottom: auto;" class="text-danger" id="finnity_low"></p>
          </div>
        </div>

      </div>
      <hr>

      <div class="bottom_card">
        <a id="market_top"  href="/put_call_ratio/open_interest/" onclick="handleClick('open_interest')" >Analytics</a>
        <a href="/put_call_ratio/change_OI/" onclick="handleClick('change_OI')" id="market_top" class="nifty_oi">Options</a>
        <a href="/put_call_ratio/put_call_ratio_main/" onclick="handleClick('put_call_ratio_main')" id="market_top">PCR</a>
        <a href="stock_option_chain" id="market_top"  class="banknifty_option_chain">Chain</a>
        <a href="/put_call_ratio/live_max_pain/" onclick="handleClick('live_max_pain')" id="market_top">Max pain</a>
        <a href="/main_contributor/finnifty/" id="market_top" class="nifty_50_contributor">Contributors</a>
      </div>
    </div>

  </div>

  <!-- <h4 class="my-3">GLOBAL MARKETS</h4> -->


  <div id="tables-container" class="contentDiv"
    style=" display: flex;   row-gap: 1rem;  column-gap: 6rem;
    justify-content: center;   flex-wrap: wrap;"></div>

  <style>
    * {
      text-decoration: none !important;
    }

    #dashboard_card_stock_market {
      transition: 0.5s;
    }

    #dashboard_card_stock_market:hover {
      scale: 1.1;
      box-shadow: rgba(149, 157, 165, 0.2) 0px 8px 24px;
      border: 5px;
    }
  </style>


<style>
  .cards_section{
    display: flex !important;
    gap: 3rem !important;
  }
  .card_one_section{
    flex: 1;
    background-color: #cfe9f1;
  }
  .card_two_upper{
    background-color: #f9f9f9;
  }
  .card_two_lower{
    background-color: #f9f9f9;
  }
  .number_circle{
    background: white;
    height: 35px;
    width: 35px;
    text-align: center;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: 50%;
  }
  .p-6{
    padding:20px;
  }
  .text-txt-menu{
    font-size: 1.3rem !important;
    font-weight: 800 !important;
  }
  .text-txt-cl{
    font-size: 15px !important;
    font-weight: 500 !important;
    line-height: 28px !important;
  }
  .claims_heading h5{
    font-size: .8rem !important;
    color: #27a3f7 !important;
  }

  .claims_heading h4{
    font-size: 2.25rem !important;
    padding: 0.9rem 12rem;
  }

  @media (max-width: 768px) {
    .cards_section{
      flex-wrap: wrap !important;
      gap: 2rem !important;
    }
    .card_one_section{
      flex-basis: 100% !important;
    }
    .claims_heading h4{
      
      padding: 0.9rem 1rem;
    }

  }
  .p-6 ul li{
    list-style: disc !important;
    font-weight: 500 !important;
    font-size: 15px !important;
  }

  .info_card{
    cursor: pointer;
    position: relative;
  }

  .info_card:hover{
    box-shadow: rgba(0, 0, 0, 0.16) 0px 1px 4px;
  }

  .cards_section a{
    color: black !important;
  }
  .center_card{
    background-color: #f9f9f9;
    cursor:pointer;
}
.redirect_icon i{
  position: absolute;
    top: 43%;
    right: 10px;
    background:#80808066;
    height: 31px;
    width: 31px;
    display: flex;
    justify-content: center;
    align-items: center;
    border-radius: 50%;
    color: white;
    
}
.redirect_icon i:hover{
  box-shadow: rgba(99, 99, 99, 0.2) 0px 2px 8px 0px;
}

</style>
<section style="padding-top: 2rem;">
  <div class="claims_heading text-center">
    <!-- <h5>BEHIND THE SCENES</h5> -->
    <h4>Top Features of our site.</h4>
  </div>
  <div>
    <div class="cards_section">
      
       
          <a class="card_one_section info_card" href="{% url "option_index_statregy_executor" %}" target="_blank" style="border-radius: 15px !important; display: flex; justify-content: space-between; flex-direction: column;">
            
                <div class="p-6">
                  <div class="redirect_icon">
                    <i class='bx bx-chevron-right'></i>
                  </div>
                <div class="main_executor_title d-flex gap-2 align-items-center">
                  <h3 class="py-2 text-xl font-bold text-txt-menu m-0">Option Index Strategy Executor</h3>
                  <i class='py-2 bx bx-play-circle fs-3 fw-light' style="color: #da0000 !important;"></i>
                </div>
                  <p class="text-cld text-txt-cl">A tool enabling users to build & save the different kinds of future and options trading strategies, save the strategy. It also facilitates the automated execution of predefined options trading strategies, we can run the strategy with multiple brokers without having to re-create the strategy. <br> Once you build a strategy, users can see the pay-off diagram, Pay-off Table, Strategy cost, OI charts and greeks for the build strategy.
                  </p>
                </div>
                <div>
                 <img src="{% static "img/top_features_img_updated.png" %}" alt="" width="100%">
                </div>
            
          
          </a>
       
         <div class="card_two_section d-flex flex-column gap-5" style="flex: 1;">

            <a class="card_two_upper info_card" href="{% url "event_tracker" %}" target="_blank" style="border-radius: 15px !important;">
             <div class="p-6">
              <div class="redirect_icon">
                <i class='bx bx-chevron-right'></i>
              </div>
               
               <h3 class="py-2 text-xl font-bold text-txt-menu">Event Tracker</h3>
               <p class="text-cld text-txt-cl">The event tracker offers insights into crucial events and outcomes pertaining to stocks, including earnings results, informing investors about the company's financial performance.<br> <br>
                Dividend declarations notify shareholders of upcoming returns. Other events tracked include bonus issues, stock splits, buybacks, rights offerings, AGMs, EGMs, board meetings, book closure periods, and offers for sale (OFS).
                </p>
             </div>
            </a>
         
              
            <a class="card_two_lower info_card" href="{% url "ipo_dashboard" %}" target="_blank" style="border-radius: 15px !important;">
              <div class="p-6">
                <div class="redirect_icon">
                  <i class='bx bx-chevron-right'></i>
                </div>
                <h3 class="py-2 text-xl font-bold text-txt-menu">IPO Dashboard</h3>
                <p class="text-cld text-txt-cl">An IPO dashboard provides key data in a concise and accessible format, offers insights on IPO performance, new listings, and market trends.<br>
                 It displays IPO returns, tracks upcoming and recent listings, highlights top performers, and provides data on basis of allotment.</p>
              </div>
              
            </a>
            
         
         </div>
      
         <div class="card_three_section d-flex flex-column gap-4" style="flex: 1;">
          
            <a class="card_two_upper info_card" href="{% url "contributor" %}" target="_blank" style="border-radius: 15px !important; flex: 1; display: flex; flex-direction: column;" >
             <div class="p-6">
              <div class="redirect_icon">
                <i class='bx bx-chevron-right'></i>
              </div>
               <h3 class="py-2 text-xl font-bold text-txt-menu">Indices Contributor</h3>
               <p class="text-cld text-txt-cl">Provides data of the top NSE indices for positive contributors and negative contributors in the stock market for a specified period of time. <br> <br>
                The data is available for Nifty 50, Nifty Next 50, Bank Nifty, Fin Nifty, Midcap Nifty & Midcap Select.</p>
             </div>
            </a>

            <a class="center_card info_card" href="{% url "mutual_fund" %}" target="_blank" style="border-radius: 15px !important;">
              <div class="">
                <div class="p-6">
                  <div class="redirect_icon">
                    <i class='bx bx-chevron-right'></i>
                  </div>
                  <h3 class="py-2 text-xl font-bold text-txt-menu">Mutual Fund</h3>
                  <p class="text-cld text-txt-cl">Mutual funds provide data on Mutual Fund Activity, NAV, Fund Performance, Holdings, Fund Profile, New Fund Offers, and more.</p>
                </div>
               </div>
            </a>

            <a class="card_two_lower info_card" href="{% url "nifty_tracker" %}" target="_blank" style="border-radius: 15px !important;">
              <div class="p-6">
                <div class="redirect_icon">
                  <i class='bx bx-chevron-right'></i>
                </div>
                <h3 class="py-2 text-xl font-bold text-txt-menu">Nifty Tracker</h3>
                <p class="text-cld text-txt-cl">A Nifty tracker offers comparative charts displaying stocks' closing and opening prices from the previous day and today, including comparisons for Nifty, Bank Nifty, and Fin Nifty.</p>
                
              </div>
              <div class="text-end">
               
              </div>
            </a>
          
           
          
         </div>
      
      

    </div>
  </div>
</section>


  <style>
    .topgainers table tbody td,
     .toplosers table tbody td,
     .sameopenandlow table tbody td,
     .sameOpenAndHigh table tbody td,
     .gapUp table tbody td,
     .gapDown table tbody td{
      font-size: 15px !important;
      font-weight: 500 !important;
    }

    .kskMxG {
    color: rgb(194, 46, 0);
    fill: none;
    width: 20px !important;
    transform: rotate(180deg);
}
.dfxNuI {
    color: rgb(3, 152, 85);
    fill: none;
    width: 20px !important;
}
.main_stocks_filter h4{
  color: #59aaf9;
  cursor: pointer;
  font-size: 1.1rem !important;
  border: 1px solid #59aaf9 !important;
  padding: 10px 12px;
  border-radius: 8px;
 
}
.market_action_active{
  background-color: #59aaf9 !important;
  color: #fff !important;
}

@media screen and (max-width: 768px) {
  .main_stocks_filter h4 {
    width: 100%;
    border-radius: 5px;
  }
  .main_stocks_filter{
    display: flex;
    gap: 0 !important;
    flex-wrap: wrap !important;
  }
}

  </style>

  <div class="main_stocks_details my-4"
    style="box-shadow: rgba(0, 0, 0, 0.16) 0px 10px 36px 0px, rgba(0, 0, 0, 0.06) 0px 0px 0px 1px;padding: 25px;">

  <div class="main_stocks_filter d-flex gap-4">
    <h4 class="my-3 market_action_active">MARKET ACTION</h4>
    <h4 class="my-3">FUTURE OPEN INTEREST SCANS</h4>
    <h4 class="my-3">NEW 52 WEEK HIGH/LOW</h4>
    <h4 class="my-3">BAN LIST</h4>
  </div>
    <div class="description_usage my-4 container">
      <div class="head_desc_usage d-flex justify-content-center">
        <div class="inner_head_desc_usage border-bottom" style="display: flex;
        overflow: auto;
        gap: 1rem;  ">
          <div class="chart-header col-2 text-center" onclick="filterChart('topgainers')" data-btn-id="1"
            style="font-size: 1.25rem !important;    width: fit-content;">
            Top Gainers
          </div>
          <div class="chart-header col-2 text-center" onclick="filterChart('toplosers')" data-btn-id="2"
            style="font-size: 1.25rem !important;    width: fit-content;">
            Top Losers
          </div>

          <div class="chart-header col-2  text-center" onclick="filterChart('sameopenandlow')" data-btn-id="3"
            style="font-size: 1.25rem !important;    width: fit-content;">
            SameOpenAndLow
          </div>

          <div class="chart-header col-2  text-center" onclick="filterChart('sameOpenAndHigh')" data-btn-id="4"
            style="font-size: 1.25rem !important;    width: fit-content;">
            SameOpenAndHigh
          </div>

          <div class="chart-header col-2  text-center" onclick="filterChart('gapUp')" data-btn-id="4"
            style="font-size: 1.25rem !important;    width: fit-content;">
            GapUp
          </div>

          <div class="chart-header col-2  text-center" onclick="filterChart('gapDown')" data-btn-id="4"
            style="font-size: 1.25rem !important;     width: fit-content;">
            GapDown
          </div>



        </div>

      </div>
      <div id="chartContainer " style=" overflow: auto;   height: 424px;">
        <div class="topgainers" id="topgainers" style="width: 100%; height: 80%">
          <table class="table table-hover table-border">
            <thead style="background: #f1f5fa;border-bottom: 1px solid black !important;" class="">

              <tr>
                <th scope="col">Chart</th>
                <th scope="col">Symbol</th>
                <th scope="col">Current Price</th>
                <th scope="col">Today Low</th>
                <th scope="col">Today High</th>
                <th scope="col">Change %</th>
                <th scope="col">Prev Close</th>
                <th scope="col">Volume</th>
                <th scope="col"></th>
              </tr>
            </thead>
            <tbody id="top_gainers_table"></tbody>
          </table>
          <h5 class="text-primary d-flex justify-content-end"><a href="{% url "top_gainers" %}" id="market_action_view_more">View more</a></h5>
        </div>
        <div class="toplosers" id="toplosers" style="width: 100%; height: 80%">
          <table class="table table-hover ">
            <thead style="background: #f1f5fa;border-bottom: 1px solid black !important;" class="">

              <tr>
                <th scope="col">Chart</th>
                <th scope="col">Symbol</th>
                <th scope="col">Current Price</th>
                <th scope="col">Today Low</th>
                <th scope="col">Today High</th>
                <th scope="col">Change %</th>
                <th scope="col">Prev Close</th>
                <th scope="col">Volume</th>
                <th scope="col"></th>
              </tr>
            </thead>
            <tbody id="top_losers_table"></tbody>
          </table>
          <h5 class="text-primary d-flex justify-content-end"><a href="{% url "top_loosers" %}" id="market_action_view_more">View more</a></h5>
        </div>

        <div class="sameopenandlow" id="sameopenandlow" style="width: 100%; height: 80%">
          <table class="table table-hover ">
            <thead style="background: #f1f5fa;border-bottom: 1px solid black !important;" class="">

              <tr>
                <th scope="col">Chart</th>
                <th scope="col">Symbol</th>
                <th scope="col">Current Price</th>
                <th scope="col">Today Low</th>
                <th scope="col">Today High</th>
                <th scope="col">Change %</th>
                <th scope="col">Prev Close</th>
                <th scope="col">Volume</th>
                <th scope="col"></th>
              </tr>
            </thead>
            <tbody id="same_open_and_low"></tbody>
          </table>
          <h5 class="text-primary d-flex justify-content-end"><a href="{% url "opening_price_clues" %}" id="market_action_view_more">View more</a></h5>
        </div>
        <div class="sameOpenAndHigh" id="sameOpenAndHigh" style="width: 100%; height: 80%">
          <table class="table table-hover ">
            <thead style="background: #f1f5fa;border-bottom: 1px solid black !important;" class="">

              <tr>
                <th scope="col">Chart</th>
                <th scope="col">Symbol</th>
                <th scope="col">Current Price</th>
                <th scope="col">Today Low</th>
                <th scope="col">Today High</th>
                <th scope="col">Change %</th>
                <th scope="col">Prev Close</th>
                <th scope="col">Volume</th>
                <th scope="col"></th>
              </tr>
            </thead>
            <tbody id="same_Open_And_High"></tbody>
          </table>
          <h5 class="text-primary d-flex justify-content-end"><a href="{% url "opening_price_clues" %}" id="market_action_view_more">View more</a></h5>
        </div>
        <div class="gapUp" id="gapUp" style="width: 100%; height: 80%">
          <table class="table table-hover ">
            <thead style="background: #f1f5fa;border-bottom: 1px solid black !important;" class="">

              <tr>
                <th scope="col">Chart</th>
                <th scope="col">Symbol</th>
                <th scope="col">Current Price</th>
                <th scope="col">Today Low</th>
                <th scope="col">Today High</th>
                <th scope="col">Change %</th>
                <th scope="col">Prev Close</th>
                <th scope="col">Volume</th>
                <th scope="col"></th>
              </tr>
            </thead>
            <tbody id="gap_Up"></tbody>
          </table>
          <h5 class="text-primary d-flex justify-content-end"><a href="{% url "gap_up_gap_down" %}" id="market_action_view_more">View more</a></h5>
        </div>
        <div class="gapDown" id="gapDown" style="width: 100%; height: 80%">
          <table class="table table-hover ">
            <thead style="background: #f1f5fa;border-bottom: 1px solid black !important;" class="">

              <tr>
                <th scope="col">Chart</th>
                <th scope="col">Symbol</th>
                <th scope="col">Current Price</th>
                <th scope="col">Today Low</th>
                <th scope="col">Today High</th>
                <th scope="col">Change %</th>
                <th scope="col">Prev Close</th>
                <th scope="col">Volume</th>
                <th scope="col"></th>
              </tr>
            </thead>
            <tbody id="gap_Down"></tbody>
          </table>
          <h5 class="text-primary d-flex justify-content-end"><a href="{% url "gap_up_gap_down" %}" id="market_action_view_more">View more</a></h5>
        </div>
       

      </div>
      
      {% comment %} <div class="button_end_table d-flex justify-content-center gap-2 flex-wrap">
        <button class=" btn btn-primary">Get a Lifetime Free Demat Account</button>
        <button class=" btn btn-danger">Intraday & Options Tradings @ Zero Brockrage</button>
        <button class="btn btn-primary">Search Stocks</button>
      </div> {% endcomment %}
    </div>
    <div class="future_open_in_scan my-4" style="display: none;">
      <div class="main_future_open d-flex gap-4 container" style="    justify-content: center;
      
        border-bottom: 1px solid lightgray;
        white-space: nowrap;">
        <div class="inner_future_open" style="display: flex;gap: 1rem; overflow: auto;">
          <div id="OI_gainer" onclick="future_filter('OI_gainer')"> OI Gainer</div>
          <div id="OI_loser" onclick="future_filter('OI_loser')">OI Loser</div>
          <div id="OI_volume_buzzers" onclick="future_filter('OI_volume_buzzers')">Volume Buzzers</div>
          <!-- <div id="OI_volume_1" onclick="future_filter('OI_volume_1')">Volume Buzzers 1 </div>
          <div id="OI_volume_2" onclick="future_filter('OI_volume_2')"> Volume Buzzers 2 </div>
   -->
        </div>
      </div>
  
  
      <div id="OI_gainer_table" style="display: block;overflow: auto;">
  
  
        <table id="Oi_gainer_data" class="table  table-hover">
          <thead style="background: #f1f5fa;border-bottom: 1px solid black !important;" class="">
  
            <tr id="columnHeaders">
            </tr>
          </thead>
          <tbody>
          </tbody>
        </table>
  
  
  
  
      </div>
      <div id="OI_loser_table" style="display: block;overflow: auto;">
  
        <table id="Oi_loser_data_table_data_table" class="table  table-hover">
          <thead style="background: #f1f5fa;border-bottom: 1px solid black !important;" class="">
  
            <tr id="columnHeaders_loser">
            </tr>
          </thead>
          <tbody>
          </tbody>
        </table>
  
  
  
      </div>
      <div id="OI_volume_buzzers_table">
        <table id="volumeShockerTable" class="table  table-hover">
          <thead style="background: #f1f5fa;border-bottom: 1px solid black !important;" class="">
  
            <tr>
  
              <th>Company Name</th>
  
              <th>Volume</th>
              <th>Volume Percentage Change</th>
              <th>Exchange</th>
            </tr>
          </thead>
          <tbody>
          </tbody>
        </table>
      </div>
      <div id="OI_volume_1_table">
        <table id="OI_volume_1_table_data"></table>
      </div>
  
      <div id="OI_volume_2_table">
        <table id="OI_volume_2_table_data"></table>
      </div>
     
    </div>
    <div class="new_52_weeks_data my-4" style="display: none;">
    <div class="main_upper_future_open d-flex gap-4 container" style="justify-content: center; border-bottom: 1px solid lightgray; white-space: nowrap;">
      <div class="main_future_open d-flex  " style="  

      display: flex;gap: 1rem; overflow: auto;
      border-bottom: 1px solid lightgray;">

        <div id="week_52_high" onclick="week_52filter('week_52_high')">52 Week High </div>
        <div id="week_52_low" onclick="week_52filter('week_52_low')">52 Week Low</div>
        <div id="only_buyers" onclick="week_52filter('only_buyers')">Only Buyers</div>
        <div id="only_sellers" onclick="week_52filter('only_sellers')">Only Sellers</div>



      </div>
    </div>
    <div class="week_52_high">
      <div class="security_main d-flex justify-content-end mt-3">
        <div class="form-group" id="security_select">
          <label for="data-dropdown">Select Securities:</label>
          <select id="data-dropdown" class="form-select">
            <option value="dataLtpGreater20">Securities > 20</option>
            <option value="dataLtpLess20">Securities < 20</option>
          </select>
        </div>
      </div>

      

      <div class="main_table_52 table-responsive">
       
        <table id="stock_table_52_high" class="mt-3 table table-hover">
          <thead style="background: #f1f5fa;border-bottom: 1px solid black !important;">
            <tr>
              <th>SYMBOL</th>
              <th>SECURITY</th>
              <th> 52W/H
                PRICE</th>
              <th>PREV.
                HIGH</th>
              <th> HIGH
                DATE</th>
              <th>LTP</th>
              <th>PREV. CLOSE</th>
              <th>CHNG</th>
              <th>%CHNG</th>
            </tr>
          </thead>
          <tbody>
            <!-- Table rows will be populated dynamically using JavaScript -->
          </tbody>
        </table>
        
      </div>
    </div>
    <div class="week_52_low table-responsive">



      <div class="security_main d-flex justify-content-end mt-3">
        <div class="form-group" id="security_select">
          <label for="data-dropdown-low">Select Securities:</label>
          <select id="data-dropdown-low" class="form-select">
            <option value="dataLtpGreater20">Securities > 20</option>
            <option value="dataLtpLess20">Securities < 20</option>
          </select>
        </div>
      </div>

      <table id="stock_table_52_low" class="mt-3 table table-hover ">
        <thead style="background: #f1f5fa;border-bottom: 1px solid black !important;">
          <tr>
            <th>SYMBOL</th>
            <th>SECURITY</th>
            <th> 52W/H
              PRICE</th>
            <th>PREV.
              HIGH</th>
            <th> HIGH
              DATE</th>
            <th>LTP</th>
            <th>PREV. CLOSE</th>
            <th>CHNG</th>
            <th>%CHNG</th>
          </tr>
        </thead>
        <tbody>
          <!-- Table rows will be populated dynamically using JavaScript -->
        </tbody>
      </table>

    </div>
    <div class="only_buyers table-responsive">



      <div class="security_main d-flex justify-content-end mt-3">
        <div class="form-group d-flex" style="    align-items: center;
        gap: 1rem;">
          <label for="data-dropdown-upper">View securities :  </label>
          <select id="data-dropdown-upper" class="form-select">
            <option value="AllSec">All</option>
            <option value="SecGtr20">Securities > 20</option>
            <option value="SecLwr20">Securities < 20</option>
          </select>
        </div>
      </div>


      <table id="stock_table_upper" class="table table-hover">
        <thead style="background: #f1f5fa;border-bottom: 1px solid black !important;">
          <th>Symbol</th>
          <th>Series</th>
          <th>LTP</th>
          <th>Change</th>
          <th>PChange</th>
          <th>PriceBand</th>
          <th>HighPrice</th>
          <th>LowPrice</th>
          <th>YearHigh</th>
          <th>YearLow</th>
          <th>TotalTradedVol</th>
          <th>Turnover</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>

<style>
  .bottom_card a{
    font-weight: 600;
  }
</style>

    </div>
    <div class="only_sellers table-responsive">

      <div class="only_sellers">
        <div class="security_main d-flex justify-content-end mt-3">
          <div class="form-group d-flex" style="    align-items: center;
            gap: 1rem;">
            <label for="data-dropdown-lower ">View securities :</label>
            <select id="data-dropdown-lower" class="form-select">
              <option value="AllSec">All</option>
              <option value="SecGtr20">Securities > 20</option>
              <option value="SecLwr20">Securities < 20</option>
            </select>
          </div>
        </div>

        <table id="stock_table_lower" class="table table-hover">
          <thead style="background: #f1f5fa;border-bottom: 1px solid black !important;">
            <tr>
              <th>Symbol</th>
              <th>Series</th>
              <th>LTP</th>
              <th>Change</th>
              <th>PChange</th>
              <th>PriceBand</th>
              <th>HighPrice</th>
              <th>LowPrice</th>
              <th>YearHigh</th>
              <th>YearLow</th>
              <th>TotalTradedVol</th>
              <th>Turnover</th>
            </tr>
          </thead>
          <tbody></tbody>
        </table>
      </div>
    </div>
    </div>
    <div class="main_ban my-4" style="display: none;">
      <div class="ban_filter d-flex gap-4 mt-4">
        <h5 class="ban_active">Securities In Ban </h5>
        <h5>Possible Entrants </h5>
        <h5>Possible Exits </h5>
      </div>
      <div class="ban_security mt-3">
        
        <table class="table  table-hover " id="securities_ban_table">
          <thead style="background: #f1f5fa;border-bottom: 1px solid black !important;" class="">

            <tr>
              <th>SYMBOL</th>
              <th>PREVIOUS MWPL %</th>
              <th>CURRENT MWPL %</th>
              <!-- Add more columns as needed -->
            </tr>
          </thead>
          <tbody></tbody>
        </table>
      </div>
      <div class="ban_entry mt-3" style="display: none;">
        
        <table class="table  table-hover " id="possible_entrants_table">
          <thead style="background: #f1f5fa;border-bottom: 1px solid black !important;" class="">

            <tr>
              <th>SYMBOL</th>
              <th>PREVIOUS MWPL %</th>
              <th>CURRENT MWPL %</th>
              <!-- Add more columns as needed -->
            </tr>
          </thead>
          <tbody></tbody>
        </table>
      </div>
      <div class="ban_exits mt-3" style="display: none;">
        
        <table class="table  table-hover " id="possible_exits_table">
          <thead style="background: #f1f5fa;border-bottom: 1px solid black !important;" class="">

            <tr>
              <th>SYMBOL</th>
              <th>PREVIOUS MWPL %</th>
              <th>CURRENT MWPL %</th>
              <!-- Add more columns as needed -->
            </tr>
          </thead>
          <tbody></tbody>
        </table>
      </div>
    </div>
  </div>

  <style>
    .main_future_tables table tbody td{
      font-size: 15px !important;
      font-weight: 500 !important;
    }
  </style>

  <script>
    $(".main_stocks_filter h4").click(function () {
    // Remove 'market_action_active' class from all h4 elements
    $(".main_stocks_filter h4").removeClass("market_action_active");

    // Add 'market_action_active' class to the clicked h4 element
    $(this).addClass("market_action_active");

    // Get the text of the clicked h4 element
    var filterType = $(this).text().trim();

    // Hide all divs related to filtering
    $(".description_usage, .future_open_in_scan, .new_52_weeks_data,.main_ban").hide();

    // Show the corresponding div based on the clicked filter type
    if (filterType === "MARKET ACTION") {
        $(".description_usage").show();
    } else if (filterType === "FUTURE OPEN INTEREST SCANS") {
        $(".future_open_in_scan").show();
    } else if (filterType === "NEW 52 WEEK HIGH/LOW") {
        $(".new_52_weeks_data").show();
    } else if(filterType === "BAN LIST"){
        $(".main_ban").show()
    }
});

  </script>
  <!-- Hidden divs -->
  <div class="main_future_tables d-none my-4"
    style="box-shadow: rgba(0, 0, 0, 0.16) 0px 10px 36px 0px, rgba(0, 0, 0, 0.06) 0px 0px 0px 1px;padding: 25px;">
    <h4 class="my-3"> FUTURE OPEN INTEREST SCANS </h4>
  <div class="future_open_in_scan">
    <div class="main_future_open d-flex gap-4 container" style="    justify-content: center;
    
      border-bottom: 1px solid lightgray;
      white-space: nowrap;">
      <div class="inner_future_open" style="display: flex;gap: 1rem; overflow: auto;">
        <div id="OI_gainer" onclick="future_filter('OI_gainer')"> OI Gainer</div>
        <div id="OI_loser" onclick="future_filter('OI_loser')">OI Loser</div>
        <div id="OI_volume_buzzers" onclick="future_filter('OI_volume_buzzers')">Volume Buzzers</div>
        <!-- <div id="OI_volume_1" onclick="future_filter('OI_volume_1')">Volume Buzzers 1 </div>
        <div id="OI_volume_2" onclick="future_filter('OI_volume_2')"> Volume Buzzers 2 </div>
 -->
      </div>
    </div>


    <div id="OI_gainer_table" style="display: block;overflow: auto;">


      <table id="Oi_gainer_data" class="table  table-hover">
        <thead style="background: #f1f5fa;border-bottom: 1px solid black !important;" class="">

          <tr id="columnHeaders">
          </tr>
        </thead>
        <tbody>
        </tbody>
      </table>




    </div>
    <div id="OI_loser_table" style="display: block;overflow: auto;">

      <table id="Oi_loser_data_table_data_table" class="table  table-hover">
        <thead style="background: #f1f5fa;border-bottom: 1px solid black !important;" class="">

          <tr id="columnHeaders_loser">
          </tr>
        </thead>
        <tbody>
        </tbody>
      </table>



    </div>
    <div id="OI_volume_buzzers_table">
      <table id="volumeShockerTable" class="table  table-hover">
        <thead style="background: #f1f5fa;border-bottom: 1px solid black !important;" class="">

          <tr>

            <th>Company Name</th>

            <th>Volume</th>
            <th>Volume Percentage Change</th>
            <th>Exchange</th>
          </tr>
        </thead>
        <tbody>
        </tbody>
      </table>
    </div>
    <div id="OI_volume_1_table">
      <table id="OI_volume_1_table_data"></table>
    </div>

    <div id="OI_volume_2_table">
      <table id="OI_volume_2_table_data"></table>
    </div>
   
  </div>


  </div>

<!-- Hidden divs -->
  <div class="maket_52_week my-4 d-none"
    style="box-shadow: rgba(0, 0, 0, 0.16) 0px 10px 36px 0px, rgba(0, 0, 0, 0.06) 0px 0px 0px 1px;padding: 25px;">
    <h4 class="my-3">NEW 52 WEEK HIGH/LOW</h4>
    <style>
      #week_52_high,
      #week_52_low,
      #only_buyers,
      #only_sellers {
        cursor: pointer;
        transition: 0.3s;
        font-size: 21px;
      }

      .active_52_week {
        color: #4399eb;
        text-align: center;
        border-bottom: 2px solid #4399eb;
        font-size: 21px;
        font-weight: 600;
      }

      #security_select {
        display: flex;
        position: relative;
        gap: 1rem;
        white-space: nowrap;
        align-items: center;
        width: fit-content;

      }
      #data-dropdown,#data-dropdown-low,#data-dropdown-upper,#data-dropdown-lower{
        outline: none;
    height: 40px;
    padding: 0 12px !important;
    width: 163px !important;
    box-shadow: none;
    border-radius: 6px;
    border: 1px solid hsl(0deg 0% 68.36%);
    background-color: #fff;
      }
      .chart-header{
        padding: 0 10px !important;
      }

      .maket_52_week table tbody td {
        font-size: 15px !important;
        font-weight: 500 !important;
      }
    .custom-div {
    background-color: #fff;
    border: 1px solid #ddd;
    padding: 10px;
    position: absolute;
    top: 4% !important;
    left: 50% !important;
    transform: translate(-50%, -50%);
    z-index: 0;
}

.week_52_high,.week_52_low,.only_buyers,.only_sellers{
  display: flex;
    flex-direction: column;
    position: relative;
}

#security_select label{
  font-size: 14px !important;
  margin-top: 0px !important;
  padding-bottom: 0 !important;
}

.security_main{
  position: absolute;
    top: 3%;
    left: 50%;
    transform: translate(-50%, -50%);
    z-index: 9 !important;
}

@media (max-width: 768px) { /* Adjust the max-width as needed */
    .security_main {
        position: static;
        left: auto;
        transform: none;
        z-index: auto;
    }
}
    </style>
  <div class="new_52_weeks_data">
    <div class="main_upper_future_open d-flex gap-4 container" style="justify-content: center; border-bottom: 1px solid lightgray; white-space: nowrap;">
      <div class="main_future_open d-flex  " style="  

      display: flex;gap: 1rem; overflow: auto;
      border-bottom: 1px solid lightgray;">

        <div id="week_52_high" onclick="week_52filter('week_52_high')">52 Week High </div>
        <div id="week_52_low" onclick="week_52filter('week_52_low')">52 Week Low</div>
        <div id="only_buyers" onclick="week_52filter('only_buyers')">Only Buyers</div>
        <div id="only_sellers" onclick="week_52filter('only_sellers')">Only Sellers</div>



      </div>
    </div>
    <div class="week_52_high">
      <div class="security_main d-flex justify-content-end mt-3">
        <div class="form-group" id="security_select">
          <label for="data-dropdown">Select Securities:</label>
          <select id="data-dropdown" class="form-select">
            <option value="dataLtpGreater20">Securities > 20</option>
            <option value="dataLtpLess20">Securities < 20</option>
          </select>
        </div>
      </div>

      

      <div class="main_table_52 table-responsive">
       
        <table id="stock_table_52_high" class="mt-3 table table-hover">
          <thead style="background: #f1f5fa;border-bottom: 1px solid black !important;">
            <tr>
              <th>SYMBOL</th>
              <th>SECURITY</th>
              <th> 52W/H
                PRICE</th>
              <th>PREV.
                HIGH</th>
              <th> HIGH
                DATE</th>
              <th>LTP</th>
              <th>PREV. CLOSE</th>
              <th>CHNG</th>
              <th>%CHNG</th>
            </tr>
          </thead>
          <tbody>
            <!-- Table rows will be populated dynamically using JavaScript -->
          </tbody>
        </table>
        
      </div>
    </div>
    <div class="week_52_low table-responsive">



      <div class="security_main d-flex justify-content-end mt-3">
        <div class="form-group" id="security_select">
          <label for="data-dropdown-low">Select Securities:</label>
          <select id="data-dropdown-low" class="form-select">
            <option value="dataLtpGreater20">Securities > 20</option>
            <option value="dataLtpLess20">Securities < 20</option>
          </select>
        </div>
      </div>

      <table id="stock_table_52_low" class="mt-3 table table-hover ">
        <thead style="background: #f1f5fa;border-bottom: 1px solid black !important;">
          <tr>
            <th>SYMBOL</th>
            <th>SECURITY</th>
            <th> 52W/H
              PRICE</th>
            <th>PREV.
              HIGH</th>
            <th> HIGH
              DATE</th>
            <th>LTP</th>
            <th>PREV. CLOSE</th>
            <th>CHNG</th>
            <th>%CHNG</th>
          </tr>
        </thead>
        <tbody>
          <!-- Table rows will be populated dynamically using JavaScript -->
        </tbody>
      </table>

    </div>
    <div class="only_buyers table-responsive">



      <div class="security_main d-flex justify-content-end mt-3">
        <div class="form-group d-flex" style="    align-items: center;
        gap: 1rem;">
          <label for="data-dropdown-upper">View securities :  </label>
          <select id="data-dropdown-upper" class="form-select">
            <option value="AllSec">All</option>
            <option value="SecGtr20">Securities > 20</option>
            <option value="SecLwr20">Securities < 20</option>
          </select>
        </div>
      </div>


      <table id="stock_table_upper" class="table table-hover">
        <thead style="background: #f1f5fa;border-bottom: 1px solid black !important;">
          <th>Symbol</th>
          <th>Series</th>
          <th>LTP</th>
          <th>Change</th>
          <th>PChange</th>
          <th>PriceBand</th>
          <th>HighPrice</th>
          <th>LowPrice</th>
          <th>YearHigh</th>
          <th>YearLow</th>
          <th>TotalTradedVol</th>
          <th>Turnover</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>

<style>
  .bottom_card a{
    font-weight: 600;
  }
</style>

    </div>
    <div class="only_sellers table-responsive">

      <div class="only_sellers">
        <div class="security_main d-flex justify-content-end mt-3">
          <div class="form-group d-flex" style="    align-items: center;
            gap: 1rem;">
            <label for="data-dropdown-lower ">View securities :</label>
            <select id="data-dropdown-lower" class="form-select">
              <option value="AllSec">All</option>
              <option value="SecGtr20">Securities > 20</option>
              <option value="SecLwr20">Securities < 20</option>
            </select>
          </div>
        </div>

        <table id="stock_table_lower" class="table table-hover">
          <thead style="background: #f1f5fa;border-bottom: 1px solid black !important;">
            <tr>
              <th>Symbol</th>
              <th>Series</th>
              <th>LTP</th>
              <th>Change</th>
              <th>PChange</th>
              <th>PriceBand</th>
              <th>HighPrice</th>
              <th>LowPrice</th>
              <th>YearHigh</th>
              <th>YearLow</th>
              <th>TotalTradedVol</th>
              <th>Turnover</th>
            </tr>
          </thead>
          <tbody></tbody>
        </table>
      </div>
    </div>
  </div>
    <script>
      $(document).ready(function () {

        // $('.dataTables_filter input[type="search"]').attr('placeholder', 'Search !important');
        // Define the DataTable instance variable
        // $('.dataTables_filter label').text('').end().find('input[type="search"]').attr('placeholder', 'Your Placeholder Text Here');
        var dataTable = null;

        // Function to update the table data using AJAX
        function updateTable() {
          
         
          // Show the spinner
          $("#spinner").show();

          // Get the selected option from the dropdown
          var selectedOption = $("#data-dropdown").val();

          $.ajax({
            url: "/get_52_week_data",
            type: "GET",
            data: { option: selectedOption }, // Pass the selected option as a parameter
            dataType: "json",
            success: function (data) {
              // Hide the spinner
              $("#spinner").hide();

              // Clear the existing table rows and destroy the DataTable instance
              if (dataTable !== null) {
                dataTable.clear().destroy();
              }
              $("#stock_table_52_high tbody").empty();

              // Populate the table with the received data
              var stockData = data[selectedOption];


              for (var i = 0; i < stockData.length; i++) {
                var stock = stockData[i];
                var change_52_high = stock.change > 0 ? "text-success" : "text-danger"
                var change_52_high_percent = stock.change > 0 ? "text-success" : "text-danger"
                var row = "<tr>" +
                  "<td>" + stock.symbol + "</td>" +
                  "<td>" + stock.comapnyName + "</td>" +
                  "<td>" + stock.new52WHL + "</td>" +
                  "<td>" + stock.prev52WHL + "</td>" +
                  "<td>" + stock.prevHLDate + "</td>" +
                  "<td>" + stock.ltp + "</td>" +
                  "<td >" + stock.prevClose + "</td>" +
                  "<td class =" + change_52_high + ">" + stock.change + "</td>" +
                  "<td class=" + change_52_high_percent + ">" + stock.pChange.toFixed(2) + "</td>" +
                  "</tr>";
                $("#stock_table_52_high tbody").append(row);
              }
              


              // Initialize DataTable plugin after updating the table
              dataTable = $('#stock_table_52_high').DataTable({
                "pageLength": 10,
                "dom": '<"top"lf>rt<"bottom"ip><"clear">',
                "language": {
                 "search": '<div class="custom-search" style="position: relative"><i class="bi bi-search" style="position: absolute;right: 7px;top: 10px;"></i><input class="form-control" type="search" placeholder=Search aria-controls="volume_shocker_table"></div>'
                }
              });
              $('#stock_table_52_high_filter input[type="search"]').attr('placeholder', 'Search...');
              $('#stock_table_52_high_filter input:eq(1)').hide();
              // var wrapperDiv = $("<div class='custom-wrapper'></div>");
              // $('#stock_table_52_high_length, #stock_table_52_high_filter').wrapAll(wrapperDiv);

              
              // $('#stock_table_52_high_wrapper').prepend(wrapperDiv);

            },
            error: function () {
              console.log("Error occurred while fetching data.");
            }
          });
        }

        // Restore the selected option from local storage
        var selectedOption = localStorage.getItem("selectedOption");
        if (selectedOption) {
          $("#data-dropdown").val(selectedOption);
        }

        // Initial update of the table
        updateTable();

        // Event listener for dropdown change
        $("#data-dropdown").change(function () {
          // Save the selected option to local storage
          var selectedOption = $("#data-dropdown").val();
          localStorage.setItem("selectedOption", selectedOption);

          updateTable();
        });
      });
    </script>
    <script>
      $(document).ready(function () {
        // Function to update the table data using AJAX
        var dataTable_Low = null;
        function updateTable() {
          // Show the spinner
          $("#spinner").show();

          // Get the selected option from the dropdown
          var selectedOption_Low = $("#data-dropdown-low").val();

          $.ajax({
            url: "/get_52_week_low_data",
            type: "GET",
            data: { option: selectedOption_Low }, // Pass the selected option as a parameter
            dataType: "json",
            success: function (data) {
              // Hide the spinner
              $("#spinner").hide();
              if (dataTable_Low !== null) {
                dataTable_Low.clear().destroy();
              }
              // Clear the existing table rows
              $("#stock_table_52_low tbody").empty();

              // Populate the table with the received data
              var stockData = data[selectedOption_Low];

              for (var i = 0; i < stockData.length; i++) {
                var stock = stockData[i];
                var change_52_high = stock.change > 0 ? "text-success" : "text-danger"
                var change_52_high_percent = stock.change > 0 ? "text-success" : "text-danger"
                var row = "<tr>" +
                  "<td>" + stock.symbol + "</td>" +
                  "<td>" + stock.comapnyName + "</td>" +
                  "<td>" + stock.new52WHL + "</td>" +
                  "<td>" + stock.prev52WHL + "</td>" +
                  "<td>" + stock.prevHLDate + "</td>" +
                  "<td>" + stock.ltp + "</td>" +
                  "<td>" + stock.prevClose + "</td>" +
                  "<td class =" + change_52_high + ">" + stock.change + "</td>" +
                  "<td class=" + change_52_high_percent + ">" + stock.pChange.toFixed(2) + "</td>" +
                  "</tr>";
                $("#stock_table_52_low tbody").append(row);
              }
              dataTable_Low = $('#stock_table_52_low').DataTable({
                "pageLength": 10,
                "dom": '<"top"lf>rt<"bottom"ip><"clear">',
                "language": {
                 "search": '<div class="custom-search" style="position: relative"><i class="bi bi-search" style="position: absolute;right: 7px;top: 10px;"></i><input class="form-control" type="search" placeholder=Search aria-controls="volume_shocker_table"></div>'
                }
              });
              $('#stock_table_52_low_filter input[type="search"]').attr('placeholder', 'Search...');
              $('#stock_table_52_low_filter input:eq(1)').hide();
            },
            error: function () {
              console.log("Error occurred while fetching data.");
            }
          });
        }

        // Restore the selected option from local storage
        var selectedOption_Low = localStorage.getItem("selectedOption_Low");

        if (selectedOption_Low) {
          $("#data-dropdown-low").val(selectedOption_Low);
        }

        // Initial update of the table
        updateTable();

        // Periodically update the table data every 5 seconds


        // Event listener for dropdown change
        $("#data-dropdown-low").change(function () {
          // Save the selected option to local storage
          var selectedOption_Low = $("#data-dropdown-low").val();
          localStorage.setItem("selectedOption_Low", selectedOption_Low);

          updateTable();
        });
      });
    </script>
    <script>
      $(document).ready(function () {
        // Function to update the table data using AJAX
        var dataTable_upper = null;
        function updateTable(selectedOption_Upper) {
          // Show the spinner
          $("#spinner").show();

          $.ajax({
            url: "/only_buyers",
            type: "GET",
            data: { option: selectedOption_Upper }, // Pass the selected option as a parameter
            dataType: "json",
            success: function (data) {
              // console.log(data["upper"][selectedOption_Upper]["data"]);
              // Hide the spinner
              $("#spinner").hide();
              if (dataTable_upper !== null) {
                dataTable_upper.clear().destroy();
              }
              // Clear the existing table rows
              $("#stock_table_upper tbody").empty();

              // Populate the table with the received data
              var stockData = data["upper"][selectedOption_Upper]["data"];

              for (var i = 0; i < stockData.length; i++) {
                var stock = stockData[i];
                var row = "<tr>" +
                  "<td>" + stock.symbol + "</td>" +
                  "<td>" + stock.series + "</td>" +
                  "<td>" + stock.ltp + "</td>" +
                  "<td>" + stock.change + "</td>" +
                  "<td>" + stock.pChange + "</td>" +
                  "<td>" + stock.priceBand + "</td>" +
                  "<td>" + stock.highPrice + "</td>" +
                  "<td>" + stock.lowPrice + "</td>" +
                  "<td>" + stock.yearHigh + "</td>" +
                  "<td>" + stock.yearLow + "</td>" +
                  "<td>" + stock.totalTradedVol + "</td>" +
                  "<td>" + stock.turnover + "</td>" +
                  "</tr>";
                $("#stock_table_upper tbody").append(row);
              }
              dataTable_upper = $('#stock_table_upper').DataTable({
                "pageLength": 10,
                "dom": '<"top"lf>rt<"bottom"ip><"clear">',
                "language": {
                 "search": '<div class="custom-search" style="position: relative"><i class="bi bi-search" style="position: absolute;right: 7px;top: 10px;"></i><input class="form-control" type="search" placeholder=Search aria-controls="volume_shocker_table"></div>'
                }
              });
              $('#stock_table_upper_filter input[type="search"]').attr('placeholder', 'Search...');
              $('#stock_table_upper_filter input:eq(1)').hide();
            },
            error: function () {
              console.log("Error occurred while fetching data.");
            }
          });
        }

        // Function to save the dropdown selection to local storage
        function saveSelection() {
          var selectedOption_Upper = $("#data-dropdown-upper").val();
          localStorage.setItem("selectedOption_Upper", selectedOption_Upper);
        }

        // Initial update of the table
        var selectedOption_Upper = localStorage.getItem("selectedOption_Upper") || "AllSec";
        $("#data-dropdown-upper").val(selectedOption_Upper);
        updateTable(selectedOption_Upper);

        // Event listener for dropdown change
        $("#data-dropdown-upper").change(function () {
          var selectedOption_Upper = $(this).val();
          updateTable(selectedOption_Upper);
          saveSelection();
        });
      });
    </script>


    <script>
      $(document).ready(function () {
        // Function to update the table data using AJAX
        function updateTable(selectedOption_lower) {
    // Show the spinner
    $("#spinner").show();

    $.ajax({
        url: "/only_buyers",
        type: "GET",
        data: { option: selectedOption_lower },
        dataType: "json",
        success: function(data) {
            // Hide the spinner
            $("#spinner").hide();

            // Retrieve existing DataTable instance or initialize if not exists
            var table = $("#stock_table_lower").DataTable();
            if (!table) {
                table = $("#stock_table_lower").DataTable({
                    "pageLength": 10,
                    "dom": '<"top"lf>rt<"bottom"ip><"clear">',
                    "language": {
                        "search": '<div class="custom-search" style="position: relative"><i class="bi bi-search" style="position: absolute; right: 7px; top: 50%; transform: translateY(-50%);"></i><input class="form-control" type="search" placeholder="Search" aria-controls="stock_table_lower"></div>'
                    }
                });
            } else {
                // Clear existing table data
                table.clear();
            }

            // Populate the table with the received data
            var stockData = data["lower"][selectedOption_lower]["data"];
            for (var i = 0; i < stockData.length; i++) {
                var stock = stockData[i];
                table.row.add([
                    stock.symbol,
                    stock.series,
                    stock.ltp,
                    stock.change,
                    stock.pChange,
                    stock.priceBand,
                    stock.highPrice,
                    stock.lowPrice,
                    stock.yearHigh,
                    stock.yearLow,
                    stock.totalTradedVol,
                    stock.turnover
                ]);
            }

            // Redraw the table to reflect the changes
            table.draw();
        },
        error: function() {
            console.log("Error occurred while fetching data.");
        }
    });
}


        // Function to save the dropdown selection to local storage
        function saveSelection() {
          var selectedOption_lower = $("#data-dropdown-lower").val();
          localStorage.setItem("selectedOption_lower", selectedOption_lower);
        }

        // Initial update of the table
        var selectedOption_lower = localStorage.getItem("selectedOption_lower") || "AllSec";
        $("#data-dropdown-lower").val(selectedOption_lower);

        $("#stock_table_lower").DataTable({
          responsive: true
        });

        updateTable(selectedOption_lower);

        // Event listener for dropdown change
        $("#data-dropdown-lower").change(function () {
          var selectedOption_lower = $(this).val();
          updateTable(selectedOption_lower);
          saveSelection();
        });
      });
    </script>





    <script>
      $(document).ready(function () {
        $(".week_52_high").show();
        $(".week_52_low").hide();
        $(".only_buyers").hide();
        $(".only_sellers").hide();
        $("#week_52_high").addClass("active_52_week")
        $("#week_52_low").removeClass("active_52_week")
        $("#only_buyers").removeClass("active_52_week")
        $("#only_sellers").removeClass("active_52_week")
      });

      function week_52filter(week_args) {
        if (week_args == "week_52_high") {
          $(".week_52_high").show();
          $(".week_52_low").hide();
          $(".only_buyers").hide();
          $(".only_sellers").hide();

          $("#week_52_high").addClass("active_52_week")
          $("#week_52_low").removeClass("active_52_week")
          $("#only_buyers").removeClass("active_52_week")
          $("#only_sellers").removeClass("active_52_week")
        } else if (week_args == "week_52_low") {
          $(".week_52_high").hide();
          $(".week_52_low").show();
          $(".only_buyers").hide();
          $(".only_sellers").hide();
          $("#week_52_high").removeClass("active_52_week")
          $("#week_52_low").addClass("active_52_week")
          $("#only_buyers").removeClass("active_52_week")
          $("#only_sellers").removeClass("active_52_week")
        } else if (week_args == "only_buyers") {
          $(".week_52_high").hide();
          $(".week_52_low").hide();
          $(".only_buyers").show();
          $(".only_sellers").hide();
          $("#week_52_high").removeClass("active_52_week")
          $("#week_52_low").removeClass("active_52_week")
          $("#only_buyers").addClass("active_52_week")
          $("#only_sellers").removeClass("active_52_week")
        } else if (week_args == "only_sellers") {
          $(".week_52_high").hide();
          $(".week_52_low").hide();
          $(".only_buyers").hide();
          $(".only_sellers").show();
          $("#week_52_high").removeClass("active_52_week")
          $("#week_52_low").removeClass("active_52_week")
          $("#only_buyers").removeClass("active_52_week")
          $("#only_sellers").addClass("active_52_week")
        }
      }
    </script>



  </div>


<style>
    .dashboard_content{
      
      background: linear-gradient(180deg,#d1eff5 0,#d1eff5 50%,rgba(245,246,247,.7) 0,rgba(245,246,247,.7));
      position: relative;
    }
    .dashboard_content h5{
      font-size: 1.3rem !important;
    }
    .dashboard_content .right_side_main_content p{
      font-size: 15px !important;
    font-weight: 500 !important;
    }
    .text-orange{
      color: #f3aa85;
      text-transform: uppercase;
      letter-spacing: 2px !important;
      font-size: 13px !important;
      font-weight: 600 !important;
    }
    .right_side_main_content{
      position: absolute;
      left: 45%;
      top: 15%;
      background-color: white !important;
      border-top-left-radius: 10px; /* Adjust the radius value as needed */
  border-bottom-left-radius: 10px;
      box-shadow: 0px 1px 150px hsla(200, 6%, 60%, 0.12), 0px 1px 30px rgba(141, 157, 168, 0.01), 0px 1px 16px rgba(141, 157, 168, 0.0);

    }
    .calls_btn{
      background: #22a1f7 !important;
      color: white !important;
      border-color: #22a1f7 !important;
      padding: 14px 25px ;
      font-weight: 400 !important;
    }
    .whatsapp_btn{
      background: #54c796 !important;
      color: white !important;
      border-color: #54c796 !important;
      padding: 14px 25px ;
      font-weight: 400 !important;
    }
    .buttons{
      padding: 40px 0 !important;
      display: flex;
      gap: 1rem;
      
    }

    @media (max-width: 768px) {
      
      .right_side_main_content{
        position: static !important;
      }
      .section_contents{
        flex-wrap: wrap !important;

      }
      .video video{
        width: 100%;
      }
      .buttons{
       flex-wrap: wrap !important;
      }
    }

    @media (min-width: 769px) and (max-width: 992px) {
  /* Your styles for medium screens go here */
  .right_side_main_content {
    position: static !important;
  }

  .section_contents {
    flex-wrap: wrap !important;
  }

  .video video {
    height: auto !important;
    width: 100%;
  }

  .buttons {
    flex-wrap: wrap !important;
  }
}

@media (max-width: 650px){
  .video video {
    height: auto !important;
    width: 100%;
  }
}

    

    .left_label{
      font-size: 15px !important;
      font-weight: 500 !important;
    }

    .insurance-options p{
      margin-left: 20px !important;
      font-weight: 500 !important;
    font-size: 12px !important;
    }
.whatsapp_modal_content{
  display: revert !important;
}
.whatsapp_left_content{
  background-image: url("{% static 'img/dashboard_img/whatsapp_bg.png' %}");
  background-repeat: no-repeat;
  background-position: center;
  background-size: cover;
  border-top-left-radius: 6px;
    border-bottom-left-radius: 6px;
 
}
#exampleFormControlTextarea1::placeholder{
  font-weight: 500 !important;
  font-size: 13px !important;
}

.call_icon i{
  background: #22a1f7;
    height: 51px;
    width: 51px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    color: white;
    /* font-weight: 600 !important; */
    font-size: 20px;
}
.video video {
  height: 350px;
}
  </style>

<section class="dashboard_content">
    <div class="section_contents d-flex">

      <div class="d-flex flex-column" style="background: #d1eff5;">
        <div class="contents d-flex flex-column align-items-center" style="padding: 4rem;">
          <!-- <span class="hidden sec-tag text-orange md:block" style=>Goodbye pushy salespeople</span> -->
          <h2 class="" style="color: #168ad8; font-size: 2.3rem !important;">Talk to the <br> support team now!</h2>
        </div>
        <div class="video" style="margin-top: 10rem;">
          <video autoplay="" loop="" muted="" playsinline="">
            <source src="{% static "videos/ditto.mp4" %}" type="video/mp4">
          </video>
        </div>
      </div>

      <div class="right_side_main_content ps-5 pe-5 pt-5">
        <div>
          <h3 class="w-auto mb-4 font-bold 2xl:mb-5 md:text-2xl 2xl:text-3xl text-c2xl text-txt">Advice you can count on</h3>
          
        </div>
        <div class="mt-5">
           <div class="row">
            <div class="col-lg-6 d-flex gap-3">
              <i class='bx bx-check'></i>
              <div>
                <h5>Custom Statergy Development </h5>
                <p class="text-sm leading-6 2xl:text-hxl text-txt-light">Customize your own strategies, save them for future use, and schedule execution on a specific date and time based on the requirement.</p>
              </div>
            </div>
            <div class="col-lg-6 d-flex gap-3">
              <i class='bx bx-check'></i>
              <div>
                <h5>Trading Mentorship</h5>
                <p class="text-sm leading-6 2xl:text-hxl text-txt-light">Provide guidance and coaching for traders, for both advanced and beginners traders, offer insights and support to improve trading skills and achieve consistent profitability.</p>
              </div>
            </div>
           </div>
           <div class="row mt-5">
            <div class="col-lg-6 d-flex gap-3">
              <i class='bx bx-check'></i>
              <div>
                <h5>Option Selling training program</h5>
                <p class="text-sm leading-6 2xl:text-hxl text-txt-light">Educational program focusing on teaching effective strategies for selling options, emphasizing risk management and profit maximization.</p>
              </div>
            </div>
            <div class="col-lg-6 d-flex gap-3">
              <i class='bx bx-check'></i>
              <div>
                <h5>Channel Partnership</h5>
                <p class="text-sm leading-6 2xl:text-hxl text-txt-light">Strategic alliances with the channel partners for expanding market reach and fostering mutual growth.</p>
              </div>
              
            </div>
           </div>
        </div>
        <div class="buttons">
          <button class="btn btn-primary calls_btn" data-bs-toggle="modal" data-bs-target="#callModal"><span><i class='bx bxs-calendar-alt'></i></span> Book a free Calls</button>
          <button class="btn btn-success whatsapp_btn" data-bs-toggle="modal" data-bs-target="#whatsappModal"><span><i class='bx bxl-whatsapp' ></i></span> WhatsApp Us</button>
        </div>
      </div>

<!-- Modals -->
<div class="modal fade" id="callModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered modal-lg">
    <div class="modal-content">
      
      <div class="modal-body" style="padding: 0 !important;">
        <div class="row" style="padding: 0 20px !important;">
         
          <div class="col-lg-4" style="border-right: 1px solid rgba(0, 0, 0, 0.27);padding: 18px 18px 31px 18px; display: flex; justify-content: center; align-items: center;">
            <div class="MuiBox-root d-flex flex-column gap-3">
              <!-- <div class="" style="background-color: rgba(0, 0, 0, 0.08); border-radius: 16px; width: 51%;
              height: 32px;
              font-size: 13px;
              display: flex;
              align-items: center;
              padding: 0 7px;
              justify-content: center;">
                <span class="MuiChip-label MuiChip-labelMedium css-9iedg7">Option Perks</span>
              </div> -->
              <!-- <h4 class="MuiTypography-root ">Talk to an advisor</h4> -->
              <!-- <p class="" style="color: #7d7d7d !important;">
                <i class="bi bi-clock-fill"></i>
                
              </p> -->
              <div class="text-center">
                <div class="MuiTypography-root MuiTypography-body1 css-j422c6 d-flex " style="gap: 14px !important;">
                  <div class="call_icon">
                    <!-- <img src="{% static "img/dialer_icon.png" %}" alt="" width="40px"> -->
                    <i class="bi bi-telephone"></i>
                  </div>
                  <div>
                    <p style="margin-left: -13px !important;">Talk to an advisor</p>
                    <u> <span style="font-size: 17px !important; font-weight: 500 !important;">+91 9000-500-600 </span></u>
                    <!-- <p style="font-weight: 600 !important;font-size: 24px !important; ">+91 9000500600</p> -->
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="col-lg-8" style="position: relative; padding: 18px 18px 31px 18px;">
            <button type="button" class="btn-close modal_close_btn" data-bs-dismiss="modal" aria-label="Close" style="position: absolute; right: 5px; top: 14px; border-radius: 50%; display: flex; align-items: center; justify-content: center; padding: 12px;"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" class="w-4 h-4 modal_cut"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button>
             <div class="d-flex flex-column gap-4">
              <label for="" style="font-size: 14px !important;">Please let us know if your query is regarding option buying, <br> option selling, or algo trading?</label>
               <div class="insurance-options">
                <label class="left_label">
                  <input class="form-check-input" type="radio" name="insuranceType" id="healthInsurance" value="health">
                    Option Buying
                    <p>Cover potential losses in your option buying strategies.</p>
                </label>
            
                <label class="mt-3 left_label">
                  <input class="form-check-input" type="radio" name="insuranceType" id="lifeInsurance" value="life">
                    Option Selling
                    <p>Generate income and manage risks with our option selling strategies.</p>
                </label>

                <label class="mt-3 left_label">
                  <input class="form-check-input" type="radio" name="insuranceType" id="lifeInsurance" value="life">
                    Algo trading
                    <p>Explore automated trading strategies for efficient and systematic trading.</p>
                </label>
              </div>
              <div class="text-area">
                <div class="fields_to_fill">
                  <div class="row">
                    <div class="col-lg-6">
                      <div class="mb-3">
                        <label for="name" class="form-label">Your Name *</label>
                        <input type="text" class="form-control" id="name" placeholder="Enter your Name" required="">
                    </div>
                    </div>
                    <div class="col-lg-6">
                      <div class="mb-3">
                        <label for="whatsappNumber" class="form-label">Your Mobile number *</label>
                        <div class="input-group">
                            <span class="input-group-text">+91</span>
                            <input type="tel" class="form-control" id="whatsappNumber" placeholder="Enter your WhatsApp number" required="">
                        </div>
                    </div>
                    </div>
                    <div class="col-lg-6">
                      <div class="mb-3">
                        <label for="query" class="form-label">Tell us your query *</label>
                        <textarea class="form-control" id="query" rows="3" placeholder="Hey, Im looking to explore option trading opportunities." required=""></textarea>
                    </div>
                    </div>
                  </div>
                  
                </div>
                <button class="btn btn-primary text-start mt-4" style="background-color: #22a1f7 !important; border-color: #22a1f7 !important;">Submit</button>
              </div>
             </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<!-- End -->

<style>
.whatsapp_label{
  font-weight: 400 !important;
  font-size: 14px !important;
}
.insurance_inquiry_page p{
  font-weight: 400 !important;
    font-size: 11px !important;
    color: gray !important;
}
.fields_to_fill label{
  font-size: 13px !important;
}
.fields_to_fill .form-control::placeholder{
  font-size: 12px !important;
  font-weight: 400 !important;
}
.bg-waModal {
    background-color: rgb(18,167,131,.2);
    padding: 10px;
    font-weight: 500 !important;
    font-size: 14px !important;
}
.modal_close_btn{
  transition: .3s;
}
.modal_close_btn:hover{
/* background-color: #f2f2f2 !important; */
background-color: #f1eded !important;
}
</style>



<!-- Whatsappmodal -->
<div class="modal fade" id="whatsappModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered modal-lg">
    <div class="modal-content whatsapp_modal_content">
      
      <div class="modal-body" style="padding: 0 0 0 12px !important;">
        <div class="row">
          <div class="col-lg-4 whatsapp_left_content d-flex align-items-center flex-column justify-content-center" style="border-right: 1px solid rgba(0, 0, 0, 0.27);">
            <div style="text-align: center;">
              <img src="{% static 'img/dashboard_img/WhatsappIcon.webp' %}" alt="">
              <p style="color: white !important;">Text us on WhatsApp</p>
            </div>
            <!-- <div class="text-white bg-waModal text-sm text-center m-4 px-1.5 py-2.5 rounded-md">Option perks offers a completely <span class="font-semibold text-secondary-350">spam-free</span> experience. We will never contact you unless you request us to do so</div> -->
            <div class="text-white bg-waModal text-sm text-center m-4 px-1.5 py-2.5 rounded-md" style="font-size: 21px !important;">+91 9000500600</div>
          </div>
          <div class="col-lg-8 insurance_inquiry_page" style="padding: 20px 30px !important;">
            <form style="position: relative;">
              <button type="button" class="btn-close modal_close_btn" data-bs-dismiss="modal" aria-label="Close" style="position: absolute; right: -7px; top: -12px; border-radius: 50%; display: flex; align-items: center; justify-content: center; padding: 12px;">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" class="w-4 h-4 modal_cut">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>
                </button>
              <div class="">
                  <label style="font-size: 13px !important;">Please let us know if your query is regarding option buying, option<br> selling, or algo trading?</label>
              </div>
      
              <div class="mb-3 form-check">
                  <input type="radio" class="form-check-input" id="healthInsurance" name="insuranceType" value="health">
                  <label class="form-check-label whatsapp_label" for="healthInsurance">Option Buying</label>
                  <p class="mb-0">Cover potential losses in your option buying strategies.</p>
              </div>
      
              <div class="mb-3 form-check">
                  <input type="radio" class="form-check-input" id="lifeInsurance" name="insuranceType" value="life">
                  <label class="form-check-label whatsapp_label" for="lifeInsurance">Option Selling</label>
                  <p class="mb-0">Generate income and manage risks with our option selling strategies.</p>
              </div>
      
              <div class="mb-3 form-check">
                  <input type="radio" class="form-check-input" id="bothInsurance" name="insuranceType" value="both">
                  <label class="form-check-label  whatsapp_label" for="bothInsurance">Algo Trading</label>
                  <p class="mb-0">Explore automated trading strategies for efficient and systematic trading.</p>
              </div>
      
              <!-- Add a submit button or other form controls as needed -->
      
            </form>
            <div class="fields_to_fill">
              <div class="row">
                <div class="col-lg-6">
                  <div class="mb-3">
                    <label for="name" class="form-label">Your Name *</label>
                    <input type="text" class="form-control" id="name" placeholder="Enter your Name" required>
                </div>
                </div>
                <div class="col-lg-6">
                  <div class="mb-3">
                    <label for="whatsappNumber" class="form-label">Your WhatsApp number *</label>
                    <div class="input-group">
                        <span class="input-group-text">+91</span>
                        <input type="tel" class="form-control" id="whatsappNumber" placeholder="Enter your WhatsApp number" required>
                    </div>
                </div>
                </div>
                <div class="col-lg-6">
                  <div class="mb-3">
                    <label for="query" class="form-label">Tell us your query *</label>
                    <textarea class="form-control" id="query" rows="3" placeholder="Hey, Im looking to explore option trading opportunities." required></textarea>
                </div>
                </div>
              </div>
              <div>
                <button class="btn btn-success" style="padding: 13px 40px !important; background-color: #54c796; border-color: #54c796 !important;">Next</button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<!-- End -->

    </div>
</section>






<style>
   .ban_security table tbody td,
   .ban_entry table tbody td,
   .ban_exits table tbody td{
    font-size: 15px !important;
    font-weight: 500 !important;
  }
  .ban_active{
    color: #59aaf9 !important;
    border-bottom: 2px solid #59aaf9;
  }
  .ban_filter h5{
    cursor: pointer;
  }
</style>

  <section class="ban_list_main d-none" id="ban-lists" style="box-shadow: rgba(0, 0, 0, 0.16) 0px 10px 36px 0px, rgba(0, 0, 0, 0.06) 0px 0px 0px 1px;
  padding: 25px; margin-top: 50px;">
    <h4 class="my-3">BAN LIST </h4>
    <div class="main_ban">
      <div class="ban_filter d-flex gap-4 mt-4">
        <h5 class="ban_active">Securities In Ban </h5>
        <h5>Possible Entrants </h5>
        <h5>Possible Exits </h5>
      </div>
      <div class="ban_security mt-3">
        
        <table class="table  table-hover " id="securities_ban_table">
          <thead style="background: #f1f5fa;border-bottom: 1px solid black !important;" class="">

            <tr>
              <th>SYMBOL</th>
              <th>PREVIOUS MWPL %</th>
              <th>CURRENT MWPL %</th>
              <!-- Add more columns as needed -->
            </tr>
          </thead>
          <tbody></tbody>
        </table>
      </div>
      <div class="ban_entry mt-3" style="display: none;">
        
        <table class="table  table-hover " id="possible_entrants_table">
          <thead style="background: #f1f5fa;border-bottom: 1px solid black !important;" class="">

            <tr>
              <th>SYMBOL</th>
              <th>PREVIOUS MWPL %</th>
              <th>CURRENT MWPL %</th>
              <!-- Add more columns as needed -->
            </tr>
          </thead>
          <tbody></tbody>
        </table>
      </div>
      <div class="ban_exits mt-3" style="display: none;">
        
        <table class="table  table-hover " id="possible_exits_table">
          <thead style="background: #f1f5fa;border-bottom: 1px solid black !important;" class="">

            <tr>
              <th>SYMBOL</th>
              <th>PREVIOUS MWPL %</th>
              <th>CURRENT MWPL %</th>
              <!-- Add more columns as needed -->
            </tr>
          </thead>
          <tbody></tbody>
        </table>
      </div>
    </div>
  </section>

  <script>
    $(".ban_filter h5").click(function () {
   // Remove 'ban_active' class from all h5 elements
   $(".ban_filter h5").removeClass("ban_active");

   // Add 'ban_active' class to the clicked h5 element
   $(this).addClass("ban_active");

   // Get the text of the clicked h5 element
   var filterType = $(this).text().trim();

   // Hide all divs related to filtering
   $(".ban_security, .ban_entry, .ban_exits").hide();

   // Show the corresponding div based on the clicked filter type
   if (filterType === "Securities In Ban") {
       $(".ban_security").show();
   } else if (filterType === "Possible Entrants") {
       $(".ban_entry").show();
   } else if (filterType === "Possible Exits") {
       $(".ban_exits").show();
   }
});
 </script>

  <style>
    .content-grid-3 {
    grid-column-gap: 2rem;
    grid-row-gap: 2rem;
    grid-template-rows: auto;
    grid-template-columns: 1fr 1fr 1fr;
    grid-auto-columns: 1fr;
    display: grid;
    
}
.blogs_card a {
    text-decoration: none !important;
    color: black !important;
}
.w-inline-block {
    max-width: 100%;
    display: inline-block;
}

.margin-bottom.margin-small, .margin-bottom.margin-xsmall, .margin-bottom.margin-xxsmall, .margin-bottom.margin-small, .margin-bottom.margin-large {
    margin-top: 0;
    margin-left: 0;
    margin-right: 0;
}

.margin-small {
    margin: 1.5rem;
}
.content-image-link {
    width: 100%;
    border-radius: 0.5rem;
    transition: all .3s;
    display: block;
    overflow: hidden;
}

.image-wrapper-16-9 {
    width: 100%;
    padding-top: 56.25%;
    position: relative;
}

.content-feature-image {
    width: 100%;
    height: 100%;
    object-fit: cover;
    border-radius: 0.5rem;
    position: absolute;
    top: 0%;
    bottom: 0%;
    left: 0%;
    right: 0%;
    overflow: hidden;
    border: 1px solid #80808029;
}

.category-link {
    color: #28b463;
    margin-bottom: 0.5rem;
    margin-right: 1rem;
    font-size: .875rem;
    font-weight: 600 !important;
    text-decoration: none;
    transition: opacity .3s;
}


.heading-xxsmall {
    letter-spacing: 0;
    font-size: 1.25rem;
    font-weight: 500;
    line-height: 1.5;
}

.text-style-2lines {
    display: -webkit-box;
    overflow: hidden;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
}

.text-style-3lines {
    display: -webkit-box;
    overflow: hidden;
    -webkit-line-clamp: 3;
    -webkit-box-orient: vertical;
    font-weight: 500 !important;
}

.blog-author-wrapper {
    align-items: center;
    margin-top: 1.5rem;
    display: flex;
}

.blog-author-image-wrapper {
    margin-right: 0.75rem;
}

.blog-small-author-image {
    width: 2.5rem;
    height: 2.5rem;
    min-height: 2.5rem;
    min-width: 2.5rem;
    object-fit: cover;
    border-radius: 100%;
}

.text-size-small {
    letter-spacing: normal;
    font-size: .875rem;
}

.card-meta-items-wrapper {
    flex-wrap: wrap;
    align-items: center;
    display: flex;
}

.swiper-wrapper {
  justify-content: center !important;
}

.swiper-button-next:after, .swiper-button-prev:after {
    font-family: swiper-icons;
    font-size: 20px !important;
    text-transform: none!important;
    letter-spacing: 0;
    font-variant: initial;
    line-height: 1;
    font-weight: 700 !important;
}

.swiper-button-prev{
  top: 225px;
  background: white !important;
  border-radius: 50% !important;
  width: 43px !important;
  height: 43px !important;
  color: gray !important;
  box-shadow: rgba(0, 0, 0, 0.35) 0px 5px 15px !important;
  margin-left: -7px
}
.swiper-button-next{
  top: 225px;
  background: white !important;
    border-radius: 50% !important;
    width: 43px !important;
    height: 43px !important;
    color: gray !important;
    box-shadow: rgba(0, 0, 0, 0.35) 0px 5px 15px !important;
    margin-right: -7px;
}
.swiper_blog_container {
  overflow: hidden; /* Hide overflow */
}

.swiper-wrapper {
  display: flex; /* Use flexbox for card alignment */
  padding: 0; /* Remove any padding */
  margin: 0;
}

.swiper-slide {
  flex-shrink: 0; /* Prevent cards from shrinking */
}

.swiper-slide {
  flex-shrink: 0; /* Prevent cards from shrinking */
  width: calc(100% / 3); /* Adjust width to show one card at a time */
}

/* Hide scrollbar */
.swiper_blog_container::-webkit-scrollbar {
  display: none;
}

.blog_view_btn button{
  color: white;
  background-color: #2196f3;
  border: 1px solid #2196f3;
  border-radius: 5px;
  padding: 8px 25px;
  transition: .3s;
}
.blog_view_btn button:hover{
  color: #2196f3;
  background: transparent;
}

  </style>



<section class="dashboard_blog mt-5" style="position: relative;">
  <h2 style="margin-bottom: 1rem !important;">BLOG</h2>
  <div class="swiper_blog_container content-grid-3">
    <div class="swiper-wrapper blogs_card blog_swiper">
       <!-- Blog items will be appended here -->
    </div>
    <div class="swiper-pagination"></div> <!-- Pagination inside the swiper container -->
    
  </div>
  <div>
    <div class="swiper-button-prev"></div> <!-- Previous button -->
    <div class="swiper-button-next"></div>
  </div>
  <div class="blog_view_btn text-center mt-4">
   <a href="{% url 'blog' %}"><button>View All</button></a> 
  </div>
</section>

<script>
  $(document).ready(function () {


    function toCamelCase(input) {
  return input.toLowerCase().replace(/_/g, ' ').replace(/(^|\s)([a-z])/g, function(match, group1, group2) {
    return group1 + group2.toUpperCase();
  });
}

function initializeSwiper() {
  var mySwiper = new Swiper('.swiper_blog_container', {
        slidesPerView: 3,
        spaceBetween: 30,
        centeredSlides: true,
        loop: true, 
        pagination: {
          el: '.swiper-pagination',
          clickable: true,
        },
        navigation: {
      nextEl: '.swiper-button-next',
      prevEl: '.swiper-button-prev',
    },
    
    
        // Enable dragging
        draggable: true,
        // Enable swiping
        touchRatio: 1,
        // Transition speed
        speed: 800,
        breakpoints: {
          // when window width is >= 320px
          320: {
              slidesPerView: 1,
              spaceBetween: 10
          },
          // when window width is >= 768px
          768: {
              slidesPerView: 2,
              spaceBetween: 20
          },
          // when window width is >= 1024px
          1024: {
              slidesPerView: 3,
              spaceBetween: 30
          }
      }
      });

  }

    function renderBlogs() {
      console.log("jhii this is blog page")
      $.ajax({
        url: 'get_blog',  // Replace with your actual backend endpoint
        method: 'GET',
        success: function (response) {
          var dashboard_blog = response.data
          
          dashboard_blog.forEach(element => {
            var createdAt = new Date(element.created_at);
      var options = { year: 'numeric', month: 'long', day: 'numeric' };
      var formattedDate = createdAt.toLocaleDateString('en-US', options).toUpperCase();

      var camelCaseCategory = toCamelCase(element.blog_category);
            var blogHtml = `
            
            <div class="swiper-slide">
  <div role="listitem" class="w-dyn-item">
  
   <a href="/blog_details/${element.id}/" class="content-clickable w-inline-block blog_detail_page" data-id = ${element.id}>
    
     <div class="margin-bottom margin-small">
      <div class="content-image-link">
         <div class="image-wrapper-16-9">
           <img src="${element.image_url}" loading="lazy" alt="" sizes="(max-width: 479px) 93vw, (max-width: 767px) 47vw, (max-width: 991px) 46vw, (max-width: 1439px) 30vw, 405.3359375px" srcset="${element.image_url}" class="content-feature-image">
         </div>
       </div>
     </div>
     <div class="category-link">
       <div>${camelCaseCategory}</div>
      </div>
     <div class="margin-bottom margin-xxsmall">
       <h3 class="heading-xxsmall text-style-2lines">${element.title}</h3>
     </div>
     <div class="margin-bottom margin-xsmall">
       <div class="text-style-3lines">${element.short_description}</div>
     </div>
     <div class="blog-author-wrapper hide-mobile-landscape">
       <div class="blog-author-image-wrapper">
         <img loading="lazy" alt="" src="https://assets-global.website-files.com/5fba23eb8789c3c7fcfb5f31/622fa2005a5fabed64659616_607d8ea5221240c8618ea3d1_Kirk-Du-Plessis-Avatar%20(1).png" sizes="(max-width: 767px) 100vw, (max-width: 1279px) 40px, (max-width: 1439px) 3vw, 40px" srcset="https://assets-global.website-files.com/5fba23eb8789c3c7fcfb5f31/622fa2005a5fabed64659616_607d8ea5221240c8618ea3d1_Kirk-Du-Plessis-Avatar%20(1)-p-500.png 500w, https://assets-global.website-files.com/5fba23eb8789c3c7fcfb5f31/622fa2005a5fabed64659616_607d8ea5221240c8618ea3d1_Kirk-Du-Plessis-Avatar%20(1).png 1153w" class="blog-small-author-image">
       </div>
      <div class="blog-author-text">
        <div class="text-size-small text-weight-medium text-color-gray900">${element.author}</div>
        <div class="card-meta-items-wrapper text-color-gray500">
          <div class="text-size-small">${formattedDate}</div>
          <div class="text-divider text-size-small"></div>
          <div class="text-size-small">2 min read</div>
        </div></div>
      </div>
    </a>
  </div>
    `;

      $(".blogs_card").append(blogHtml);
          });
  initializeSwiper();
        }
      })
    
  }

  renderBlogs()
  });
</script>


  <!-- <h4 class="my-3">IPO List </h4>
<div class="ipo container" style="box-shadow: rgba(0, 0, 0, 0.16) 0px 10px 36px 0px, rgba(0, 0, 0, 0.06) 0px 0px 0px 1px;
padding: 25px;">

  <div class="description_usage my-4">
    <div class="head_desc_usage">
      <div class="row border-bottom">
        <div class="chart-header col-4" onclick="filter_ipoIpo('r_list')" id="r_btn" style="font-size: 21px">
          Recent List
        </div>
        <div class="chart-header col-4" onclick="filter_ipoIpo('a_list')" id="a_btn" style="font-size: 21px">
          Active List
        </div>
        <div class="chart-header col-4" onclick="filter_ipoIpo('f_list')" id="f_btn" style="font-size: 21px">
          Forthcoming List
        </div>
      </div>
      <div class="main_desc_usage mt-4" id="main_desc_usage"></div>
    </div>
  </div>






  <div id="chartContainer container " style="">
    <div class="equity_sme" id="equity_sme" style="width: 100%; ">

      <div class="row border-bottom text-center">
        <div class="equity_btn col-6" id="equity_btn" onclick="filter_Equity_Sme('1st')" style="font-size: 21px">
          Equity
        </div>
        <div class="sme_btn col-6" id="sme_btn" onclick="filter_Equity_Sme('2nd')" style="font-size: 21px">
          SME
        </div>
    
      </div>
      <div class="equity_sme">

        <div class="equity" id="equity">
          <table id="equity-table" class="table">
            <thead>
                <tr>
                    <th>Symbol</th>
                    <th>Name</th>
                    <th>Instrument</th>
                </tr>
            </thead>
            <tbody></tbody>
        </table>
        </div>
        <div class="sme" id="sme">
          <table id="sme-table" class="table">
            <thead>
                <tr>
                    <th>Symbol</th>
                    <th>Name</th>
                    <th>Instrument</th>
                </tr>
            </thead>
            <tbody></tbody>
        </table>
        </div>
      </div>
    </div>
    <div class="r_list" id="r_list" style="width: 100%; ">
      
    
    </div>

    <div class="f_list" id="f_list" style="width: 100%; ">
      <div class="col-4" id="Bulleye">
        
      </div>
    </div>
  </div>




</div> -->
</div>















<script>
  var equity = document.getElementById("equity");
  var sme = document.getElementById("sme");

  equity.style.display = "block";

  sme.style.display = "none";
  var equity_btn = document.getElementById("equity_btn")

  equity_btn.classList.add("filter_child_active")
  function filter_Equity_Sme(filter_e_s) {
    if (filter_e_s == "1st") {
      equity.style.display = "block";

      sme.style.display = "none";
      equity_btn.classList.add("filter_child_active")
      sme_btn.classList.remove("filter_child_active")
    }
    else if (filter_e_s == "2nd") {
      equity.style.display = "none";

      sme.style.display = "block";
      sme_btn.classList.add("filter_child_active")
      equity_btn.classList.remove("filter_child_active")
    }
  }
</script>

<script>
  // Function to show or hide charts based on filter_ipo selection
  var equity_sme = document.getElementById("equity_sme");
  var r_list = document.getElementById("r_list");
  var f_list = document.getElementById("f_list");
  equity_sme.style.display = "block";
  document.getElementById("r_btn").classList.add("filter_ipo_active")
  r_list.style.display = "none";
  f_list.style.display = "none";
  function filter_ipoIpo(filter_ipo) {
    var equity_sme = document.getElementById("equity_sme");
    var r_list = document.getElementById("r_list");
    var f_list = document.getElementById("f_list");
    var chartContainer = document.getElementById("chartContainer");

    if (filter_ipo === "r_list") {
      equity_sme.style.display = "block";

      r_list.style.display = "none";
      f_list.style.display = "none";
      document.getElementById("r_btn").classList.add("filter_ipo_active")
      document.getElementById("a_btn").classList.remove("filter_ipo_active")
      document.getElementById("f_btn").classList.remove("filter_ipo_active")
    } else if (filter_ipo === "a_list") {
      equity_sme.style.display = "none";
      r_list.style.display = "block";
      f_list.style.display = "none";
      document.getElementById("a_btn").classList.add("filter_ipo_active")
      document.getElementById("r_btn").classList.remove("filter_ipo_active")
      document.getElementById("f_btn").classList.remove("filter_ipo_active")
    } else if (filter_ipo === "f_list") {
      equity_sme.style.display = "none";
      r_list.style.display = "none";
      f_list.style.display = "block";
      document.getElementById("f_btn").classList.add("filter_ipo_active")
      document.getElementById("a_btn").classList.remove("filter_ipo_active")
      document.getElementById("r_btn").classList.remove("filter_ipo_active")
    }
  }


</script>

<script>
  // Function to show or hide charts based on filter selection
  var topgainers = document.getElementById("topgainers");
  var toplosers = document.getElementById("toplosers");
  var sameopenandlow = document.getElementById("sameopenandlow");
  var sameOpenAndHigh = document.getElementById("sameOpenAndHigh");
  var gapUp = document.getElementById("gapUp");
  var gapDown = document.getElementById("gapDown");
  topgainers.style.display = "block";


  toplosers.style.display = "none";
  sameopenandlow.style.display = "none";
  sameOpenAndHigh.style.display = "none";
  gapUp.style.display = "none";
  gapDown.style.display = "none";
  function filterChart(filter) {

    var topgainers = document.getElementById("topgainers");
    var toplosers = document.getElementById("toplosers");
    var sameopenandlow = document.getElementById("sameopenandlow");
    var sameOpenAndHigh = document.getElementById("sameOpenAndHigh");
    var gapUp = document.getElementById("gapUp");
    var gapDown = document.getElementById("gapDown");
    var chartContainer = document.getElementById("chartContainer");

    if (filter === "topgainers") {
      topgainers.style.display = "block";
      toplosers.style.display = "none";
      sameopenandlow.style.display = "none";
      sameOpenAndHigh.style.display = "none";
      gapUp.style.display = "none";
      gapDown.style.display = "none";
      

    } else if (filter === "toplosers") {
      topgainers.style.display = "none";
      toplosers.style.display = "block";
      sameopenandlow.style.display = "none";
      sameOpenAndHigh.style.display = "none";
      gapUp.style.display = "none";
      gapDown.style.display = "none";
    } else if (filter === "sameopenandlow") {
      topgainers.style.display = "none";
      toplosers.style.display = "none";
      sameopenandlow.style.display = "block";
      sameOpenAndHigh.style.display = "none";
      gapUp.style.display = "none";
      gapDown.style.display = "none";
    } else if (filter == "sameOpenAndHigh") {
      topgainers.style.display = "none";
      toplosers.style.display = "none";
      sameopenandlow.style.display = "none";
      sameOpenAndHigh.style.display = "block";
      gapUp.style.display = "none";
      gapDown.style.display = "none";
    }
    else if (filter == "gapUp") {
      topgainers.style.display = "none";
      toplosers.style.display = "none";
      sameopenandlow.style.display = "none";
      sameOpenAndHigh.style.display = "none";
      gapUp.style.display = "block";
      gapDown.style.display = "none";
    }

    else if (filter == "gapDown") {
      topgainers.style.display = "none";
      toplosers.style.display = "none";
      sameopenandlow.style.display = "none";
      sameOpenAndHigh.style.display = "none";
      gapUp.style.display = "none";
      gapDown.style.display = "block";
    }



  }
  $(document).ready(function () {
    $("[data-btn-id]:first-child").addClass("desc_usage_active");
    // Filter button click event
    $("[data-btn-id]").click(function () {
      var btnId = $(this).attr("data-btn-id");
      filterResults(btnId);
      changeButtonColor($(this));
    });

    // Initial filtering (optional)
    filterResults(1);
    // Function to filter results
    function filterResults(btnId) {
      // Clear previous results
      // Filter elements based on btnId
    }

    // Function to change button color
    function changeButtonColor(button) {
      // Reset color of all buttons
      $("[data-btn-id]").removeClass("desc_usage_active");

      // Add color to the clicked button
      button.addClass("desc_usage_active");
    }
  });
</script>
<script>
  var OI_gainer_table = document.getElementById("OI_gainer_table")
  var OI_loser_table = document.getElementById("OI_loser_table")
  var OI_volume_buzzers_table = document.getElementById("OI_volume_buzzers_table")
  var OI_volume_1_table = document.getElementById("OI_volume_1_table")
  var OI_volume_2_table = document.getElementById("OI_volume_2_table")

  var OI_gainer = document.getElementById("OI_gainer")
  var OI_loser = document.getElementById("OI_loser")
  var OI_volume_buzzers = document.getElementById("OI_volume_buzzers")
  var OI_volume_1 = document.getElementById("OI_volume_1")
  var OI_volume_2 = document.getElementById("OI_volume_2")




  OI_gainer_table.style.display = "block"
  OI_loser_table.style.display = "none"
  OI_volume_buzzers_table.style.display = "none"
  OI_volume_1_table.style.display = "none"
  OI_volume_2_table.style.display = "none"
  OI_gainer.classList.add("future_active")


  function future_filter(future) {
    if (future == "OI_gainer") {
      OI_gainer_table.style.display = "block"
      OI_loser_table.style.display = "none"
      OI_volume_buzzers_table.style.display = "none"
      OI_volume_1_table.style.display = "none"
      OI_volume_2_table.style.display = "none"

      OI_gainer.classList.add("future_active")
      OI_loser.classList.remove("future_active")
      OI_volume_buzzers.classList.remove("future_active")
      OI_volume_1.classList.remove("future_active")
      OI_volume_2.classList.remove("future_active")

    } else if (future == "OI_loser") {
      OI_gainer_table.style.display = "none"
      OI_loser_table.style.display = "block"
      OI_volume_buzzers_table.style.display = "none"
      OI_volume_1_table.style.display = "none"
      OI_volume_2_table.style.display = "none"

      OI_loser.classList.add("future_active")
      OI_gainer.classList.remove("future_active")
      OI_volume_buzzers.classList.remove("future_active")
      OI_volume_1.classList.remove("future_active")
      OI_volume_2.classList.remove("future_active")

    }
    else if (future == "OI_volume_buzzers") {
      OI_gainer_table.style.display = "none"
      OI_loser_table.style.display = "none"
      OI_volume_buzzers_table.style.display = "block"
      OI_volume_1_table.style.display = "none"
      OI_volume_2_table.style.display = "none"

      OI_loser.classList.remove("future_active")
      OI_gainer.classList.remove("future_active")
      OI_volume_buzzers.classList.add("future_active")
      OI_volume_1.classList.remove("future_active")
      OI_volume_2.classList.remove("future_active")
    }
    else if (future == "OI_volume_1") {
      OI_gainer_table.style.display = "none"
      OI_loser_table.style.display = "none"
      OI_volume_buzzers_table.style.display = "none"
      OI_volume_1_table.style.display = "block"
      OI_volume_2_table.style.display = "none"

      OI_loser.classList.remove("future_active")
      OI_gainer.classList.remove("future_active")
      OI_volume_buzzers.classList.remove("future_active")
      OI_volume_1.classList.add("future_active")
      OI_volume_2.classList.remove("future_active")
    }

    else if (future == "OI_volume_2") {
      OI_gainer_table.style.display = "none"
      OI_loser_table.style.display = "none"
      OI_volume_buzzers_table.style.display = "none"
      OI_volume_1_table.style.display = "none"
      OI_volume_2_table.style.display = "block"

      OI_loser.classList.remove("future_active")
      OI_gainer.classList.remove("future_active")
      OI_volume_buzzers.classList.remove("future_active")
      OI_volume_1.classList.remove("future_active")
      OI_volume_2.classList.add("future_active")
    }
  }
</script>
<script>
  $(document).ready(function () {
    $.ajax({
      url: '/volume-shocker/',
      method: 'GET',
      success: function (data) {
        createTable(data);
      },
      error: function (error) {
        console.log(error);
      }
    });

    function createTable(data) {
      console.log(data);
      const tableBody = $('#volumeShockerTable tbody');

      // Clear any existing rows in the table body
      tableBody.empty();

      // Iterate over the data array using the map function
      var rows = data.map(function (item) {
        return '<tr>' +

          '<td>' + item.companyName + '</td>' +

          '<td>' + item.volume + '</td>' +
          '<td>' + item.volumePercentageChange.toFixed(2) + '%</td>' +
          '<td>' + item.exchange + '</td>' +
          '</tr>';
      });

      // Join the rows array and append it to the table body
      tableBody.append(rows.join(''));
      $('#volumeShockerTable').DataTable({
        "pageLength": 10,
        "dom": '<"top"lf>rt<"bottom"ip><"clear">',
                "language": {
                 "search": '<div class="custom-search" style="position: relative"><i class="bi bi-search" style="position: absolute;right: 7px;top: 10px;"></i><input class="form-control" type="search" placeholder=Search aria-controls="volume_shocker_table"></div>'
                }
      });
      $('#volumeShockerTable_filter input[type="search"]').attr('placeholder', 'Search...');
      $('#volumeShockerTable_filter input:eq(1)').hide();
    }
  });
</script>

<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://cdn.datatables.net/1.11.3/js/jquery.dataTables.min.js"></script>
<link rel="stylesheet" href="https://cdn.datatables.net/1.11.3/css/jquery.dataTables.min.css">

<script>
  $(document).ready(function () {
    $.ajax({
      url: 'oi_gainers',
      method: 'GET',
      success: function (data) {
        createTable(data);
      },
      error: function (error) {
        console.log(error);
      }
    });

    function createTable(data) {
      const tableBody = $('#Oi_gainer_data tbody');
      const tableHeaders = $('#columnHeaders');

      // Create table headers
      const columnHeaders = data.columns.map(function (column) {
        return '<th>' + column.charAt(0).toUpperCase() + column.slice(1) + '</th>';
      });
      tableHeaders.html(columnHeaders.join(''));

      // Create table rows
      const tableRows = data.data.map(function (row) {
        var date_change_percent = row[2] > 0 ? " text-success  " : "text-danger";
        var volume_contract_percent = row[4] > 0 ? " text-success  " : "text-danger";
        var oi_percent = row[4] > 0 ? " text-success  " : "text-danger";
        return '<tr>' +
          '<td>' + row[0] + '</td>' +  // name
          '<td>' + row[1] + '</td>' +  // price
          '<td class= ' + date_change_percent + '>' + row[2] + '%</td>' +  // Date Chang
          '<td>' + row[3] + '</td>' +  // Volume Contracts
          '<td class= ' + volume_contract_percent + '>' + row[4] + '%</td>' +  // % Volume Contracts
          // '<td style= " white-space: nowrap;">' + row[5] + '  Cr</td>' +  // TTV
          '<td>' + row[6] + '</td>' +  // OI
          '<td class= ' + oi_percent + '     style= " white-space: nowrap;">' + row[7] + ' %</td>' +  // %OI
          '<td>' + row[8] + '</td>' +  // Basis
          '<td>' + row[9] + '</td>' +  // COC
          '<td>' + row[10] + '</td>' + // Spot
          '<td > <div style="color: green;">' + row[11] + '</div></td>' + // Build Up
          '</tr>';
      });
      tableBody.html(tableRows.join(''));

      // Initialize DataTable
      $('#Oi_gainer_data').DataTable({
        "pageLength": 10,
        "dom": '<"top"lf>rt<"bottom"ip><"clear">',
                "language": {
                 "search": '<div class="custom-search" style="position: relative"><i class="bi bi-search" style="position: absolute;right: 7px;top: 10px;"></i><input class="form-control" type="search" placeholder=Search aria-controls="volume_shocker_table"></div>'
                }

      });
      $('#Oi_gainer_data_filter input[type="search"]').attr('placeholder', 'Search...');
      $('#Oi_gainer_data_filter input:eq(1)').hide();

    }
  });
</script>


<script>
  $(document).ready(function () {
    $.ajax({
      url: 'oi_losers',
      method: 'GET',
      success: function (data) {
        createTable(data);
      },
      error: function (error) {
        console.log(error);
      }
    });

    function createTable(data) {
      const tableBody = $('#Oi_loser_data_table_data_table tbody');
      const tableHeaders = $('#columnHeaders_loser');

      // Create table headers
      const columnHeaders_loser = data.columns.map(function (column) {
        return '<th>' + column + '</th>';
      });
      tableHeaders.html(columnHeaders_loser.join(''));

      // Create table rows
      const tableRows = data.data.map(function (row) {
        var date_change_percent = row[2] > 0 ? " text-success  " : "text-danger";
        var volume_contract_percent = row[4] > 0 ? " text-success  " : "text-danger";
        var oi_percent = row[4] > 0 ? " text-success  " : "text-danger";
        var build_up_text_color = row[11] === "Long Unwinding" ? "orange" : (row[11] === "Short Covering" ? "lightgreen" : "");
        return '<tr>' +
          '<td>' + row[0] + '</td>' +  // name
          '<td>' + row[1] + '</td>' +  // price
          '<td class= ' + date_change_percent + '>' + row[2] + '%</td>' +  // Date Chang
          '<td>' + row[3] + '</td>' +  // Volume Contracts
          '<td class= ' + volume_contract_percent + '>' + row[4] + '%</td>' +  // % Volume Contracts
          // '<td style= " white-space: nowrap;">' + row[5] + '  Cr</td>' +  // TTV
          '<td>' + row[6] + '</td>' +  // OI
          '<td class= ' + oi_percent + '     style= " white-space: nowrap;">' + row[7] + ' %</td>' +  // %OI
          '<td>' + row[8] + '</td>' +  // Basis
          '<td>' + row[9] + '</td>' +  // COC
          '<td>' + row[10] + '</td>' + // Spot
          '<td style="color: ' + build_up_text_color + '">' + row[11] + '</td>' + // Build Up (conditionally set text color)
          '</tr>';
      });
      tableBody.html(tableRows.join(''));
      $('#Oi_loser_data_table_data_table').DataTable({
        "pageLength": 10,
        "dom": '<"top"lf>rt<"bottom"ip><"clear">',
                "language": {
                 "search": '<div class="custom-search" style="position: relative"><i class="bi bi-search" style="position: absolute;right: 7px;top: 10px;"></i><input class="form-control" type="search" placeholder=Search aria-controls="volume_shocker_table"></div>'
                }
      });
      $('#Oi_loser_data_table_data_table_filter input[type="search"]').attr('placeholder', 'Search...');
      $('#Oi_loser_data_table_data_table_filter input:eq(1)').hide();

    }
  });
  $(document).ready(function () {
    $('#OI_volume_1_table_data').DataTable({
      "pageLength": 10
    });
    $('#Oi_loser_data_table_data_table').DataTable({
      "pageLength": 10
    });
  })
</script>
{% endblock dashboard_body %}