<!DOCTYPE html>
<html>
<head>
    <title>Opening Clue Data</title>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.11.5/css/jquery.dataTables.min.css">
    <script src="https://cdn.datatables.net/1.11.5/js/jquery.dataTables.min.js"></script>
</head>
<body>
    <h1>High Data</h1>
    <table id="high-table">
        <thead>
            <tr>
                <th>Symbol Name</th>
                <th>Today Open</th>
                <th>Today High</th>
                <th>Today Low</th>
            </tr>
        </thead>
    </table>

    <h1>Low Data</h1>
    <table id="low-table">
        <thead>
            <tr>
                <th>Symbol Name</th>
                <th>Today Open</th>
                <th>Today High</th>
                <th>Today Low</th>
            </tr>
        </thead>
    </table>

    <script>
        $(document).ready(function() {
            $.ajax({
                url: "/opening_clue_data_view",
                type: "GET",
                dataType: "json",
                success: function(data) {
                    displayHighData(data.high);
                    displayLowData(data.low);
                },
                error: function(error) {
                    console.log("Error fetching data:", error);
                }
            });

            function displayHighData(data) {
                var table = $("#high-table");
                table.DataTable().destroy(); // Destroy any existing DataTable instance
                table.find("tbody").empty(); // Clear existing rows
                $.each(data, function(index, item) {
                    var row = $("<tr>");
                    row.append($("<td>").text(item.symbol_name));
                    row.append($("<td>").text(item.today_open));
                    row.append($("<td>").text(item.today_high));
                    row.append($("<td>").text(item.today_low));
                    table.append(row);
                });

                // Initialize DataTables for the table with no default sorting
                table.DataTable({
                    "order": []
                });
            }

            function displayLowData(data) {
                var table = $("#low-table");
                table.DataTable().destroy(); // Destroy any existing DataTable instance
                table.find("tbody").empty(); // Clear existing rows
                $.each(data, function(index, item) {
                    var row = $("<tr>");
                    row.append($("<td>").text(item.symbol_name));
                    row.append($("<td>").text(item.today_open));
                    row.append($("<td>").text(item.today_high));
                    row.append($("<td>").text(item.today_low));
                    table.append(row);
                });

                // Initialize DataTables for the table with no default sorting
                table.DataTable({
                    "order": []
                });
            }
        });
    </script>
</body>
</html>
